!function(a){"use strict";function e(e,t,l,n){var i="",o="",s="",r=0,c="flagged";"follow"===e?(i="icon-eye",o="icon-eye-full flagged"):"support"===e&&(i="icon-heart",o="icon-heart-full flagged"),s="sidebar"==n?a(t).parent().siblings(".value"):a(t).siblings(".value");var r=parseInt(s.first().text());"flagged"==l?(a(t).siblings('[class^="icon-"]').addClass(o),s.addClass(c),a(t).siblings('[class^="icon-"]').removeClass(i),r+=1):(a(t).siblings('[class^="icon-"]').addClass(i),a(t).siblings('[class^="icon-"]').removeClass(o),s.removeClass(c),r-=1),s.text(r)}function t(e){var t=a(e).parent();return t.hasClass("sidebar-link")?"sidebar":t.hasClass("card-full-link")?"card-full":t.hasClass("card-large-link")?"card-large":t.hasClass("card-small-link")?"card-small":null}var l=(a(window),a(document));l.ready(function(){a("*").find(".node-type-conversation").length>0&&a(".ui-menu-collaboration-discussion").addClass("active"),a("*").find(".node-type-knowledge-object").length>0&&a(".ui-menu-collaboration-documents").addClass("active"),a(".cockade").hover(function(){a(this).next().stop().animate({"max-width":"100%",padding:"5px 6px 5px 40px"},"fast")},function(){a(this).next().stop().animate({"max-width":"0",padding:"5px 0"},"fast")}),a(".card img, .full-width-card img").each(function(e,t){var l=a(this).attr("src");a(this).parent("a").css({"background-image":'url("'+l+'")'}),a(this).remove()}),a(".card-large-link, .card-full-link, .small-card-link, .sidebar-2 .stat-label, .sidebar-2 .nav li ").hover(function(){a(this).find("a , .value").css("color","#00746A")},function(){a(this).find("a , .value").css("color","inherit")}),a('[data-toggle="popover"]').popover(),a(".page-search .nav-tabs").insertAfter("#search-form"),a('.page-node-edit.node-type-hub .nav a[href="#edit-options"]').tooltip({placement:"right",title:"Please review the publishing options before finalising the promotion of this idea. By default, it will be unpublished and thus not visible on the website."}),a(".full-width-top .container").updateBackgroundHeader(),a('.event a[class^="icon-"], .event a[class*=" icon-"]').click(function(e){e.preventDefault(),a(this).parent().find(".flag-wrapper a").trigger("click"),e.stopPropagation()});var n=".follow.event, .follow.event .flag-wrapper, .support.event, .support.event .flag-wrapper ";l.on("click",n,function(e){e.target==this&&(e.preventDefault(),a(this).find("a").trigger("click"))}),a(".follow.event, .support.event").on("click",".flag-wrapper a",function(a){a.stopPropagation()}),a(".comment").filter(".small-card-link,.card-large-link,.card-full-link").click(function(){event.preventDefault();var e=a(this).find(".icon-dialogue").attr("href");window.location.href=e}),a(".ideas.card-large-link, .share .stat-label, .mail .stat-label, .sidebar-2 ul li").click(function(){event.preventDefault();var e=a(this).find("a").attr("href");window.location.href=e}),l.bind("flagGlobalAfterLinkUpdate",function(a,l){var n=l.flagStatus,i="",o="",s="";switch(l.flagName){case"support_collaboration":i=".flag-support-collaboration-"+l.contentId,o="support";break;case"follow_collaboration":i=".flag-follow-collaboration-"+l.contentId,o="follow";break;case"challenge_flag":i=".flag-challenge-flag-"+l.contentId,o="follow";break;case"support_idea":i=".flag-support-idea-"+l.contentId,o="support";break;case"following_idea":i=".flag-following-idea-"+l.contentId,o="follow"}s=t(i),e(o,i,n,s)})}),a.fn.updateBackgroundHeader=function(){var e=a(this),t=e.data("background");if(t){var l=(e.data("type"),e.closest(".full-width-top")),n=l.css("background-image");l.css("background-image",n+', url("'+t+'")')}},a.fn.stopBodyScroll=function(){a(this).closest("body").toggleClass("stop-scrolling")},a.fn.equalHeights=function(){var e=0;return a(this).each(function(t,l){var n=a(this).outerHeight(!0);n>e&&(e=n)}),e}}(jQuery),function(a){"use strict";var e=(a(window),a(document));e.ready(function(a){function e(){n.css("display","block"),n.animate({opacity:"1"},100),l.animate({left:"0"},150),a("body").addClass("stop-scrolling")}function t(){n.css({display:"none",opacity:"0"}),l.animate({left:i},200),a("body").removeClass("stop-scrolling")}var l=a("nav.slider-mobile"),n=a(".overlay"),i=l.css("left");a("#nav-hamburger").click(function(a){a.preventDefault(),e()}),a("#nav-mobile-close, .overlay").click(function(a){a.preventDefault(),t()})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsInNsaWRlbmF2LmpzIl0sIm5hbWVzIjpbIiQiLCJpY29uU3VwcG9ydEFuZEZvbGxvd0ludGVyYWN0aW9uIiwiZmxhZ1R5cGUiLCJmbGFnQ2xhc3MiLCJmbGFnU3RhdHVzIiwiY2FyZFR5cGUiLCJjbGFzc1NpbXBsZSIsImNsYXNzRnVsbCIsInZhbHVlQ2xhc3MiLCJjb3VudGVyIiwiY2xhc3NGbGFnIiwicGFyZW50Iiwic2libGluZ3MiLCJwYXJzZUludCIsImZpcnN0IiwidGV4dCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJnZXRDYXJkVHlwZSIsImZsYWdQYXJlbnQiLCJoYXNDbGFzcyIsImRvYyIsIndpbmRvdyIsImRvY3VtZW50IiwicmVhZHkiLCJmaW5kIiwibGVuZ3RoIiwiaG92ZXIiLCJ0aGlzIiwibmV4dCIsInN0b3AiLCJhbmltYXRlIiwibWF4LXdpZHRoIiwicGFkZGluZyIsImVhY2giLCJpbmRleCIsImVsIiwiaW1nU3JjIiwiYXR0ciIsImNzcyIsImJhY2tncm91bmQtaW1hZ2UiLCJyZW1vdmUiLCJwb3BvdmVyIiwiaW5zZXJ0QWZ0ZXIiLCJ0b29sdGlwIiwicGxhY2VtZW50IiwidGl0bGUiLCJ1cGRhdGVCYWNrZ3JvdW5kSGVhZGVyIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwidHJpZ2dlciIsInN0b3BQcm9wYWdhdGlvbiIsImVsZW1Ub0NsaWNrIiwib24iLCJlIiwidGFyZ2V0IiwiZmlsdGVyIiwiY29tbWVudF91cmwiLCJsb2NhdGlvbiIsImhyZWYiLCJsaW5rIiwiYmluZCIsImRhdGEiLCJzdGF0dXMiLCJmbGFnTmFtZSIsImNvbnRlbnRJZCIsImZuIiwiY29udGFpbmVyIiwiZGF0YUJnIiwiY2xvc2VzdEZ1bGxXaWR0aFRvcCIsImNsb3Nlc3QiLCJjb2xvckJhY2tncm91bmQiLCJzdG9wQm9keVNjcm9sbCIsInRvZ2dsZUNsYXNzIiwiZXF1YWxIZWlnaHRzIiwidGFsbGVzdEhlaWdodCIsImhlaWdodCIsIm91dGVySGVpZ2h0IiwialF1ZXJ5Iiwib3Blbk5hdkFuZE92ZXJsYXkiLCJvdmVybGF5Iiwib3BhY2l0eSIsIm5hdiIsImxlZnQiLCJjbG9zZU5hdkFuZE92ZXJsYXkiLCJkaXNwbGF5IiwibGVmdE5hdiJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsR0FFQSxZQW9KQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBLEdBQ0FDLEVBQUEsRUFDQUMsRUFBQSxTQUVBLFlBQUFSLEdBQ0FJLEVBQUEsV0FDQUMsRUFBQSx5QkFFQSxZQUFBTCxJQUNBSSxFQUFBLGFBQ0FDLEVBQUEsMkJBSUFDLEVBREEsV0FBQUgsRUFDQUwsRUFBQUcsR0FBQVEsU0FBQUMsU0FBQSxVQUVBWixFQUFBRyxHQUFBUyxTQUFBLFNBR0EsSUFBQUgsR0FBQUksU0FBQUwsRUFBQU0sUUFBQUMsT0FFQSxZQUFBWCxHQUNBSixFQUFBRyxHQUFBUyxTQUFBLG9CQUFBSSxTQUFBVCxHQUNBQyxFQUFBUSxTQUFBTixHQUNBVixFQUFBRyxHQUFBUyxTQUFBLG9CQUFBSyxZQUFBWCxHQUNBRyxHQUFBLElBRUFULEVBQUFHLEdBQUFTLFNBQUEsb0JBQUFJLFNBQUFWLEdBQ0FOLEVBQUFHLEdBQUFTLFNBQUEsb0JBQUFLLFlBQUFWLEdBQ0FDLEVBQUFTLFlBQUFQLEdBQ0FELEdBQUEsR0FHQUQsRUFBQU8sS0FBQU4sR0FLQSxRQUFBUyxHQUFBZixHQUNBLEdBQUFnQixHQUFBbkIsRUFBQUcsR0FBQVEsUUFFQSxPQUFBUSxHQUFBQyxTQUFBLGdCQUNBLFVBQ0FELEVBQUFDLFNBQUEsa0JBQ0EsWUFDQUQsRUFBQUMsU0FBQSxtQkFDQSxhQUNBRCxFQUFBQyxTQUFBLG1CQUNBLGFBR0EsS0F6TUEsR0FDQUMsSUFEQXJCLEVBQUFzQixRQUNBdEIsRUFBQXVCLFVBRUFGLEdBQUFHLE1BQUEsV0FHQXhCLEVBQUEsS0FBQXlCLEtBQUEsMkJBQUFDLE9BQUEsR0FD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RyxZQUFBLG1CQUlBMUUsRUFBQW1FLEdBQUFRLGFBQUEsV0FDQSxHQUFBQyxHQUFBLENBUUEsT0FQQTVFLEdBQUE0QixNQUFBTSxLQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQXlDLEdBQUE3RSxFQUFBNEIsTUFBQWtELGFBQUEsRUFDQUQsR0FBQUQsSUFDQUEsRUFBQUMsS0FJQUQsSUFHQUcsUUNuUUEsU0FBQS9FLEdBQ0EsWUFDQSxJQUNBcUIsSUFEQXJCLEVBQUFzQixRQUNBdEIsRUFBQXVCLFVBRUFGLEdBQUFHLE1BQUEsU0FBQXhCLEdBZ0JBLFFBQUFnRixLQUNBQyxFQUFBMUMsSUFBQSxVQUFBLFNBQ0EwQyxFQUFBbEQsU0FDQW1ELFFBQUEsS0FDQSxLQUVBQyxFQUFBcEQsU0FDQXFELEtBQUEsS0FDQSxLQUdBcEYsRUFBQSxRQUFBZ0IsU0FBQSxrQkFJQSxRQUFBcUUsS0FDQUosRUFBQTFDLEtBQ0ErQyxRQUFBLE9BQ0FKLFFBQUEsTUFHQUMsRUFBQXBELFNBQ0FxRCxLQUFBRyxHQUNBLEtBR0F2RixFQUFBLFFBQUFpQixZQUFBLGtCQXpDQSxHQUFBa0UsR0FBQW5GLEVBQUEscUJBQ0FpRixFQUFBakYsRUFBQSxZQUNBdUYsRUFBQUosRUFBQTVDLElBQUEsT0FFQXZDLEdBQUEsa0JBQUFnRCxNQUFBLFNBQUFPLEdBQ0FBLEVBQUFMLGlCQUNBOEIsTUFHQWhGLEVBQUEsK0JBQUFnRCxNQUFBLFNBQUFPLEdBQ0FBLEVBQUFMLGlCQUNBbUMsU0FtQ0FOIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCkge1xuXG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgd2luID0gJCh3aW5kb3cpO1xuICB2YXIgZG9jID0gJChkb2N1bWVudCk7XG5cbiAgZG9jLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gIC8vQWRkIGNsYXNzIHRvIGRpc2N1c3Npb24gYW5kIGRvY3VtZW50c1xuICBpZiAoJCgnKicpLmZpbmQoJy5ub2RlLXR5cGUtY29udmVyc2F0aW9uJykubGVuZ3RoID4wKXtcbiAgICAkKCBcIi51aS1tZW51LWNvbGxhYm9yYXRpb24tZGlzY3Vzc2lvblwiICkuYWRkQ2xhc3MoIFwiYWN0aXZlXCIgKTtcbiAgfVxuICBpZiAoJCgnKicpLmZpbmQoJy5ub2RlLXR5cGUta25vd2xlZGdlLW9iamVjdCcpLmxlbmd0aCA+MCl7XG4gICAgJCggXCIudWktbWVudS1jb2xsYWJvcmF0aW9uLWRvY3VtZW50c1wiICkuYWRkQ2xhc3MoIFwiYWN0aXZlXCIgKTtcbiAgfVxuXG4gIC8vQ0FSRFNcbiAvLyBDb2NrYWRlIGFuaW1hdGlvbnMgZm9yIGNhcmRcblxuICAkKCcuY29ja2FkZScpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAkKHRoaXMpLm5leHQoKS5zdG9wKCkuYW5pbWF0ZShcbiAgICAgICAgIHsgXCJtYXgtd2lkdGhcIjogXCIxMDAlXCIsIFwicGFkZGluZ1wiOiBcIjVweCA2cHggNXB4IDQwcHhcIiB9XG4gICAgICAgICwnZmFzdCcpO1xuICB9LCBmdW5jdGlvbigpIHtcbiAgICAgJCh0aGlzKS5uZXh0KCkuc3RvcCgpLmFuaW1hdGUoXG4gICAgICAgIHsgXCJtYXgtd2lkdGhcIjogXCIwXCIsIFwicGFkZGluZ1wiOiBcIjVweCAwXCIgfVxuICAgICAgICAsJ2Zhc3QnKTtcbiAgfSk7XG5cblxuICAvLyBTZXQgY2FyZCBpbWdzIGFzIGEgYmFja2dyb3VuZCBvbiB0aGUgbGluayB0byBoZWxwIHJlc3BvbnNpdmVuZXNzXG4gICQoJy5jYXJkIGltZywgLmZ1bGwtd2lkdGgtY2FyZCBpbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xuICAgIHZhciBpbWdTcmMgPSAkKHRoaXMpLmF0dHIoJ3NyYycpO1xuXG4gICAgJCh0aGlzKS5wYXJlbnQoJ2EnKS5jc3Moe1xuICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKFwiJyArIGltZ1NyYyArICdcIiknXG4gICAgfSk7XG5cbiAgICAkKHRoaXMpLnJlbW92ZSgpO1xuXG4gIH0pO1xuXG5cbiAgLy9BZGQgaG92ZXIgb24gY2FyZCBmb290ZXIvYXNpZGVcbiAgJCgnLmNhcmQtbGFyZ2UtbGluaywgLmNhcmQtZnVsbC1saW5rLCAuc21hbGwtY2FyZC1saW5rLCAuc2lkZWJhci0yIC5zdGF0LWxhYmVsLCAuc2lkZWJhci0yIC5uYXYgbGkgJykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5maW5kKCdhICwgLnZhbHVlJykuY3NzKCdjb2xvcicsICcjMDA3NDZBJyk7XG4gIH0sIGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuZmluZCgnYSAsIC52YWx1ZScpLmNzcygnY29sb3InLCAnaW5oZXJpdCcpO1xuICB9KTtcblxuICAgLy9DaGFsbGVuZ2UgYW5kIENvbGxhYm9yYXRpb24gUG9wb3ZlclxuICAkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3ZlcigpO1xuXG4gIC8vTW92ZSBzZWNvbmRhcnkgdGFiIHBhZ2Ugb24gc2VhcmNoIGJlbG93IGFkdmFuY2VkIHNlYXJjaC5cbiAgJCgnLnBhZ2Utc2VhcmNoIC5uYXYtdGFicycpLmluc2VydEFmdGVyKCcjc2VhcmNoLWZvcm0nKTtcblxuICAvL1Rvb2x0aXAgZm9yIHB1Ymxpc2hpbmcgYSBwcm9tb3RlIGlkZWFcbiAgJCgnLnBhZ2Utbm9kZS1lZGl0Lm5vZGUtdHlwZS1odWIgLm5hdiBhW2hyZWY9XCIjZWRpdC1vcHRpb25zXCJdJykudG9vbHRpcCh7XG4gICAgcGxhY2VtZW50OiAncmlnaHQnLFxuICAgIHRpdGxlOiAnUGxlYXNlIHJldmlldyB0aGUgcHVibGlzaGluZyBvcHRpb25zIGJlZm9yZSBmaW5hbGlzaW5nIHRoZSBwcm9tb3Rpb24gb2YgdGhpcyBpZGVhLiBCeSBkZWZhdWx0LCBpdCB3aWxsIGJlIHVucHVibGlzaGVkIGFuZCB0aHVzIG5vdCB2aXNpYmxlIG9uIHRoZSB3ZWJzaXRlLidcbiAgfSlcblxuICAvL0NoYW5nZSBCYWNrZ3JvdW5kIGFuZCBhZGQgaW1hZ2UgdG8gSGVhZGVyIG9uIGludmlkdWFsIGNvbGxhYm9yYXRlLCBjaGFsbGVuZ2UgYW5kIGlkZWFzXG4gICQoJy5mdWxsLXdpZHRoLXRvcCAuY29udGFpbmVyJykudXBkYXRlQmFja2dyb3VuZEhlYWRlcigpO1xuXG4gIC8vVHJpZ2dlciBzdXBwb3J0L2ZvbGxvdyBldmVudCB3aGVuIGNsaWNrIG9uIGljb25cbiAgICQoJy5ldmVudCBhW2NsYXNzXj1cImljb24tXCJdLCAuZXZlbnQgYVtjbGFzcyo9XCIgaWNvbi1cIl0nKS5jbGljayhmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLmZsYWctd3JhcHBlciBhJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9KTtcblxuLy8gVHJpZ2dlciB0byBmaXJlIGV2ZW50IG9uIGRpdiBvbiBmb2xsb3cgYW5kIHN1cHBvcnQgZXZlbnRcbiAgdmFyIGVsZW1Ub0NsaWNrID0gJy5mb2xsb3cuZXZlbnQsIC5mb2xsb3cuZXZlbnQgLmZsYWctd3JhcHBlciwgLnN1cHBvcnQuZXZlbnQsIC5zdXBwb3J0LmV2ZW50IC5mbGFnLXdyYXBwZXIgJztcblxuICBkb2Mub24oJ2NsaWNrJywgZWxlbVRvQ2xpY2sgLCBmdW5jdGlvbihlKSB7XG4gICAgaWYoZS50YXJnZXQgPT0gdGhpcykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJCh0aGlzKS5maW5kKCdhJykudHJpZ2dlcignY2xpY2snKTtcbiAgICB9XG4gIH0pO1xuXG5cbiAgJCgnLmZvbGxvdy5ldmVudCwgLnN1cHBvcnQuZXZlbnQnKS5vbignY2xpY2snLCAnLmZsYWctd3JhcHBlciBhJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSk7XG5cbiAvLyBGaXJlIGNvbW1lbnQgbGluayBvbiBjYXJkc1xuXG4gICQoJy5jb21tZW50JykuZmlsdGVyKCcuc21hbGwtY2FyZC1saW5rLC5jYXJkLWxhcmdlLWxpbmssLmNhcmQtZnVsbC1saW5rJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBjb21tZW50X3VybCA9ICQodGhpcykuZmluZCgnLmljb24tZGlhbG9ndWUnKS5hdHRyKCdocmVmJyk7XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjb21tZW50X3VybDtcbiAgfSk7XG5cbi8vTGlua3MgT24gaW5kaXZpZHVhbCBjaGFsbGVuZ2UsIGlkZWEgYW5kIGNvbGxhYm9yYXRpb24gcGFnZXNcbi8vTGluayBMYXJnZSBjYXJkIGlkZWFzXG4gICQoXCIuaWRlYXMuY2FyZC1sYXJnZS1saW5rLCAuc2hhcmUgLnN0YXQtbGFiZWwsIC5tYWlsIC5zdGF0LWxhYmVsLCAuc2lkZWJhci0yIHVsIGxpXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbGluayA9ICQodGhpcykuZmluZCgnYScpLmF0dHIoJ2hyZWYnKTtcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGxpbms7XG4gIH0pO1xuXG5cbiAgLyogRkxBRyBTdXBwb3J0L0ZvbGxvdyBSZXNwb25zZSAqL1xuICBkb2MuYmluZCgnZmxhZ0dsb2JhbEFmdGVyTGlua1VwZGF0ZScsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XG5cbiAgICB2YXIgc3RhdHVzID0gZGF0YS5mbGFnU3RhdHVzO1xuICAgIHZhciBmbGFnQ2xhc3MgPSAnJztcbiAgICB2YXIgZmxhZ1R5cGUgPSAnJztcbiAgICB2YXIgY2FyZFR5cGUgPSAnJztcblxuXG4gICAgc3dpdGNoIChkYXRhLmZsYWdOYW1lKSB7XG4gICAgICBjYXNlICdzdXBwb3J0X2NvbGxhYm9yYXRpb24nOiAvL0NhcmQgb24gQ29sbGFib3JhdGlvbiBwYWdlXG4gICAgICAgIGZsYWdDbGFzcyA9ICcuZmxhZy1zdXBwb3J0LWNvbGxhYm9yYXRpb24tJyArIGRhdGEuY29udGVudElkO1xuICAgICAgICBmbGFnVHlwZSA9ICdzdXBwb3J0JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2ZvbGxvd19jb2xsYWJvcmF0aW9uJzogLy9DYXJkIG9uIENvbGxhYm9yYXRpb24gcGFnZVxuICAgICAgICBmbGFnQ2xhc3MgPSAnLmZsYWctZm9sbG93LWNvbGxhYm9yYXRpb24tJyArIGRhdGEuY29udGVudElkO1xuICAgICAgICBmbGFnVHlwZSA9ICdmb2xsb3cnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY2hhbGxlbmdlX2ZsYWcnOiAvL0luZGl2aWR1YWwgY2hhbGxlbmdlIHBhZ2VcbiAgICAgICAgZmxhZ0NsYXNzID0gJy5mbGFnLWNoYWxsZW5nZS1mbGFnLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnZm9sbG93JztcblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnc3VwcG9ydF9pZGVhJzogLy9DYXJkIG9uIENvbGxhYm9yYXRpb24gcGFnZVxuICAgICAgICBmbGFnQ2xhc3MgPSAnLmZsYWctc3VwcG9ydC1pZGVhLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnc3VwcG9ydCdcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2ZvbGxvd2luZ19pZGVhJzogLy9DYXJkIG9uIENvbGxhYm9yYXRpb24gcGFnZVxuICAgICAgICBmbGFnQ2xhc3MgPSAnLmZsYWctZm9sbG93aW5nLWlkZWEtJyArIGRhdGEuY29udGVudElkO1xuICAgICAgICBmbGFnVHlwZSA9ICdmb2xsb3cnO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvL0dldCBDYXJkIFR5cGVcbiAgICBjYXJkVHlwZSA9IGdldENhcmRUeXBlKGZsYWdDbGFzcyk7XG4gICAgaWNvblN1cHBvcnRBbmRGb2xsb3dJbnRlcmFjdGlvbihmbGFnVHlwZSwgZmxhZ0NsYXNzLCBzdGF0dXMsIGNhcmRUeXBlKTtcblxuICB9KTtcblxufSk7XG5cbi8vQ2hhbmdlcyBmbGFnIGljb25zIG9uIHN1cHBvcnQvdW5zdXBwb3J0IGFuZCBmb2xsb3cvdW5mb2xsb3dcbmZ1bmN0aW9uIGljb25TdXBwb3J0QW5kRm9sbG93SW50ZXJhY3Rpb24oZmxhZ1R5cGUsIGZsYWdDbGFzcywgZmxhZ1N0YXR1cywgY2FyZFR5cGUpIHtcbiAgdmFyIGNsYXNzU2ltcGxlID0gJyc7XG4gIHZhciBjbGFzc0Z1bGwgPSAnJztcbiAgdmFyIHZhbHVlQ2xhc3MgPSAnJztcbiAgdmFyIGNvdW50ZXIgPSAwO1xuICB2YXIgY2xhc3NGbGFnID0gJ2ZsYWdnZWQnO1xuXG4gIGlmIChmbGFnVHlwZSA9PT0gJ2ZvbGxvdycpIHtcbiAgICBjbGFzc1NpbXBsZSA9ICdpY29uLWV5ZSc7XG4gICAgY2xhc3NGdWxsID0gJ2ljb24tZXllLWZ1bGwgZmxhZ2dlZCc7XG5cbiAgfSBlbHNlIGlmICggZmxhZ1R5cGUgPT09ICdzdXBwb3J0JyAgKSB7XG4gICAgY2xhc3NTaW1wbGUgPSAnaWNvbi1oZWFydCc7XG4gICAgY2xhc3NGdWxsID0gJ2ljb24taGVhcnQtZnVsbCBmbGFnZ2VkJztcbiAgfVxuXG4gIGlmKGNhcmRUeXBlID09ICdzaWRlYmFyJykge1xuICAgIHZhbHVlQ2xhc3MgPSAkKGZsYWdDbGFzcykucGFyZW50KCkuc2libGluZ3MoJy52YWx1ZScpO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlQ2xhc3MgPSAkKGZsYWdDbGFzcykuc2libGluZ3MoJy52YWx1ZScpO1xuICB9XG5cbiAgdmFyIGNvdW50ZXIgPSAgcGFyc2VJbnQoIHZhbHVlQ2xhc3MuZmlyc3QoKS50ZXh0KCkgKTtcblxuICBpZiggZmxhZ1N0YXR1cyA9PSAnZmxhZ2dlZCcgKSB7XG4gICAgJChmbGFnQ2xhc3MpLnNpYmxpbmdzKCdbY2xhc3NePVwiaWNvbi1cIl0nKS5hZGRDbGFzcyhjbGFzc0Z1bGwpO1xuICAgIHZhbHVlQ2xhc3MuYWRkQ2xhc3MoY2xhc3NGbGFnKTtcbiAgICAkKGZsYWdDbGFzcykuc2libGluZ3MoJ1tjbGFzc149XCJpY29uLVwiXScpLnJlbW92ZUNsYXNzKGNsYXNzU2ltcGxlKTtcbiAgICBjb3VudGVyID0gIGNvdW50ZXIgKyAxO1xuICB9IGVsc2Uge1xuICAgICQoZmxhZ0NsYXNzKS5zaWJsaW5ncygnW2NsYXNzXj1cImljb24tXCJdJykuYWRkQ2xhc3MoY2xhc3NTaW1wbGUpO1xuICAgICQoZmxhZ0NsYXNzKS5zaWJsaW5ncygnW2NsYXNzXj1cImljb24tXCJdJykucmVtb3ZlQ2xhc3MoY2xhc3NGdWxsKTtcbiAgICB2YWx1ZUNsYXNzLnJlbW92ZUNsYXNzKGNsYXNzRmxhZyk7XG4gICAgY291bnRlciA9ICBjb3VudGVyIC0gMTtcbiAgfVxuXG4gIHZhbHVlQ2xhc3MudGV4dCggY291bnRlciApO1xuXG59XG5cbi8vR2V0IHRoZSBjYXJkIHR5cGUgYmFzZWQgb24gdGhlIGxpbmsgdHlwZVxuZnVuY3Rpb24gZ2V0Q2FyZFR5cGUoZmxhZ0NsYXNzKXtcbiAgdmFyIGZsYWdQYXJlbnQgPSAkKGZsYWdDbGFzcykucGFyZW50KCk7XG5cbiAgaWYoIGZsYWdQYXJlbnQuaGFzQ2xhc3MoJ3NpZGViYXItbGluaycpICl7XG4gICAgcmV0dXJuICdzaWRlYmFyJztcbiAgfSBlbHNlIGlmKCBmbGFnUGFyZW50Lmhhc0NsYXNzKCdjYXJkLWZ1bGwtbGluaycpICl7XG4gICAgcmV0dXJuICdjYXJkLWZ1bGwnO1xuICB9IGVsc2UgaWYgKCBmbGFnUGFyZW50Lmhhc0NsYXNzKCdjYXJkLWxhcmdlLWxpbmsnKSApIHtcbiAgICByZXR1cm4gJ2NhcmQtbGFyZ2UnO1xuICB9IGVsc2UgaWYgKCBmbGFnUGFyZW50Lmhhc0NsYXNzKCdjYXJkLXNtYWxsLWxpbmsnKSApIHtcbiAgICByZXR1cm4gJ2NhcmQtc21hbGwnXG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vL0NlbnRlciBsYXJnZSBjYXJkc1xuZnVuY3Rpb24gY2VudGVyTGFyZ2VDYXJkcygpIHtcbiAgJCgnLnZpZXcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xuICAgIHZhciBsYXJnZUNhcmQgPSAnLmNhcmQubGFyZ2UnO1xuICAgIHZhciBuQ2FyZHMgPSAkKHRoaXMpLmZpbmQobGFyZ2VDYXJkKS5sZW5ndGg7XG5cbiAgICBpZiggbkNhcmRzID09IDEpIHtcbiAgICAgICQobGFyZ2VDYXJkKS5jc3Moe1xuICAgICAgICAnbWFyZ2luLWxlZnQnOiAnYXV0bycsXG4gICAgICAgICdtYXJnaW4tcmlnaHQnOiAnYXV0bycsXG4gICAgICAgICdmbG9hdCc6ICdub25lJ1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICggbkNhcmRzID09IDIgKSB7XG4gICAgICAkKGxhcmdlQ2FyZCkuZmlyc3QoKS5hZGRDbGFzcygnY29sLXNtLW9mZnNldC0yJyk7XG4gICAgfVxuXG4gIH0pO1xufVxuXG4vL1VwZGF0ZSBiYWNrZ29ydW5kIGhlYWRlcnMgb24gY2hhbGxlbmdlL2NvbGxhYm9yYXRlL2lkZWFzXG4kLmZuLnVwZGF0ZUJhY2tncm91bmRIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGNvbnRhaW5lciA9ICQodGhpcyk7XG4gIHZhciBkYXRhQmcgPSBjb250YWluZXIuZGF0YSgnYmFja2dyb3VuZCcpO1xuXG4gIGlmKCBkYXRhQmcgKXtcbiAgICB2YXIgZGF0YVR5cGUgPSBjb250YWluZXIuZGF0YSgndHlwZScpO1xuICAgIHZhciBjbG9zZXN0RnVsbFdpZHRoVG9wID0gY29udGFpbmVyLmNsb3Nlc3QoJy5mdWxsLXdpZHRoLXRvcCcpO1xuICAgIHZhciBjb2xvckJhY2tncm91bmQgPSAgY2xvc2VzdEZ1bGxXaWR0aFRvcC5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnKTtcblxuICAgIGNsb3Nlc3RGdWxsV2lkdGhUb3AuXG4gICAgY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgY29sb3JCYWNrZ3JvdW5kICsgJywgdXJsKFwiJyArIGRhdGFCZyArICdcIiknKTtcbiAgfVxufVxuXG4vL1N0b3AgYm9keSBzY3JvbGxpbmdcbiQuZm4uc3RvcEJvZHlTY3JvbGwgPSAgZnVuY3Rpb24oKSB7XG4gICQodGhpcykuY2xvc2VzdCgnYm9keScpLnRvZ2dsZUNsYXNzKCdzdG9wLXNjcm9sbGluZycpO1xufVxuXG4vL0NhbGN1bGF0ZSBhbmQgYXNzaWduIHRoZSBzYW1lIGhlaWdodCB0byB0aGUgY2FyZCBiYXNlZCBvbiB0aGUgaGlnaGVzdCBjYXJkIG9uIHRoZSBwYWdlXG4kLmZuLmVxdWFsSGVpZ2h0cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdGFsbGVzdEhlaWdodCA9IDA7XG4gICQodGhpcykuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcbiAgICB2YXIgaGVpZ2h0ID0gJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICBpZiggaGVpZ2h0ID4gdGFsbGVzdEhlaWdodCApe1xuICAgICAgdGFsbGVzdEhlaWdodCA9IGhlaWdodDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0YWxsZXN0SGVpZ2h0O1xufTtcblxufSkoalF1ZXJ5KTtcbiIsIi8qIE1vYmlsZSBtZW51IHNsaWRlICovXG5cbihmdW5jdGlvbiAoJCkge1x0XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgd2luID0gJCh3aW5kb3cpO1xuICB2YXIgZG9jID0gJChkb2N1bWVudCk7XG5cbiAgZG9jLnJlYWR5KGZ1bmN0aW9uKCQpIHtcbiAgXHR2YXIgbmF2ID0gJChcIm5hdi5zbGlkZXItbW9iaWxlXCIpO1xuICBcdHZhciBvdmVybGF5ID0gJCgnLm92ZXJsYXknKTtcbiAgXHR2YXIgbGVmdE5hdiA9IG5hdi5jc3MoJ2xlZnQnKTtcblxuICBcdCQoJyNuYXYtaGFtYnVyZ2VyJykuY2xpY2soZnVuY3Rpb24oZSkge1xuICBcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBcdFx0b3Blbk5hdkFuZE92ZXJsYXkoKTtcbiAgXHR9KTtcblxuICBcdCQoJyNuYXYtbW9iaWxlLWNsb3NlLCAub3ZlcmxheScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdGNsb3NlTmF2QW5kT3ZlcmxheSgpO1xuICBcdH0pO1xuXG4gIFx0Ly9EaXNwbGF5IHNpZGVOYXYgYW5kICBvdmVybGF5XG4gIFx0ZnVuY3Rpb24gb3Blbk5hdkFuZE92ZXJsYXkoKSB7XG4gIFx0ICBvdmVybGF5LmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICBcdCAgb3ZlcmxheS5hbmltYXRlKHtcbiAgXHQgIFx0b3BhY2l0eTogJzEnIFxuICBcdCAgfSwgMTAwKVxuXG4gIFx0ICBuYXYuYW5pbWF0ZSh7XG4gIFx0ICAgIGxlZnQ6ICcwJ1xuICBcdCAgfSwgMTUwKTsgXG5cbiAgICAgIC8vRGlzYWJsZSBzY3JvbGwgZm9yIGJhY2tncm91bmQgcGFnZVxuICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdzdG9wLXNjcm9sbGluZycpO1xuXHQgIH1cblx0IFxuICBcdC8vSGlkZSBzaWRlTmF2IGFuZCBvdmVybGF5XG4gIFx0ZnVuY3Rpb24gY2xvc2VOYXZBbmRPdmVybGF5KCl7XG4gIFx0ICBvdmVybGF5LmNzcyh7XG4gIFx0ICBcdGRpc3BsYXk6ICdub25lJyxcbiAgXHQgIFx0b3BhY2l0eTogJzAnXG4gIFx0ICB9KTtcblxuICBcdCAgbmF2LmFuaW1hdGUoe1xuICBcdCAgIGxlZnQ6IGxlZnROYXZcbiAgXHQgICAgfSwgMjAwKTsgXG4gICAgICBcbiAgICAgICAvL0VuYWJsZSBzY3JvbGwgZm9yIGJhY2tncm91bmQgcGFnZVxuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdzdG9wLXNjcm9sbGluZycpO1xuICBcdH1cbiAgXHRcbiAgfSk7XG5cbn0pKGpRdWVyeSk7XG4iXX0=
