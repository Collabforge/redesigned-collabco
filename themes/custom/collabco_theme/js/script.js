!function(a){"use strict";function e(e,l,t,n){var i="",o="",s="",r=0,c="flagged";"follow"===e?(i="icon-eye",o="icon-eye-full flagged"):"support"===e&&(i="icon-heart",o="icon-heart-full flagged"),s="sidebar"==n?a(l).parent().siblings(".value"):a(l).siblings(".value");var r=parseInt(s.first().text());"flagged"==t?(a(l).siblings('[class^="icon-"]').addClass(o),s.addClass(c),a(l).siblings('[class^="icon-"]').removeClass(i),r+=1):(a(l).siblings('[class^="icon-"]').addClass(i),a(l).siblings('[class^="icon-"]').removeClass(o),s.removeClass(c),r-=1),s.text(r)}function l(e){var l=a(e).parent();return l.hasClass("sidebar-link")?"sidebar":l.hasClass("card-full-link")?"card-full":l.hasClass("card-large-link")?"card-large":l.hasClass("card-small-link")?"card-small":null}var t=(a(window),a(document));t.ready(function(){a("*").find(".node-type-conversation").length>0&&a(".ui-menu-collaboration-discussion").addClass("active"),a("*").find(".node-type-knowledge-object").length>0&&a(".ui-menu-collaboration-documents").addClass("active"),a(".cockade").hover(function(){a(this).next().stop().animate({"max-width":"100%",padding:"5px 6px 5px 40px"},"fast")},function(){a(this).next().stop().animate({"max-width":"0",padding:"5px 0"},"fast")}),a(".card img, .full-width-card img").each(function(e,l){var t=a(this).attr("src");a(this).parent("a").css({"background-image":'url("'+t+'")'}),a(this).remove()}),a(".card-large-link, .card-full-link, .small-card-link, .sidebar-2 .stat-label, .sidebar-2 .nav li ").hover(function(){a(this).find("a , .value").css("color","#00746A")},function(){a(this).find("a , .value").css("color","inherit")}),a('[data-toggle="popover"]').popover(),a(".page-search .nav-tabs").insertAfter("#search-form"),a('.page-node-edit.node-type-hub .nav a[href="#edit-options"]').tooltip({placement:"right",title:"Please review the publishing options before finalising the promotion of this idea. By default, it will be unpublished and thus not visible on the website."}),a('.event a[class^="icon-"], .event a[class*=" icon-"]').click(function(e){e.preventDefault(),a(this).parent().find(".flag-wrapper a").trigger("click"),e.stopPropagation()});var n=".follow.event, .follow.event .flag-wrapper, .support.event, .support.event .flag-wrapper ";t.on("click",n,function(e){e.target==this&&(e.preventDefault(),a(this).find("a").trigger("click"))}),a(".follow.event, .support.event").on("click",".flag-wrapper a",function(a){a.stopPropagation()}),a(".comment").filter(".small-card-link,.card-large-link,.card-full-link").click(function(){event.preventDefault();var e=a(this).find(".icon-dialogue").attr("href");window.location.href=e}),a(".ideas.card-large-link, .share .stat-label, .mail .stat-label, .sidebar-2 ul li").click(function(){event.preventDefault();var e=a(this).find("a").attr("href");window.location.href=e}),t.bind("flagGlobalAfterLinkUpdate",function(a,t){var n=t.flagStatus,i="",o="",s="";switch(t.flagName){case"support_collaboration":i=".flag-support-collaboration-"+t.contentId,o="support";break;case"follow_collaboration":i=".flag-follow-collaboration-"+t.contentId,o="follow";break;case"challenge_flag":i=".flag-challenge-flag-"+t.contentId,o="follow";break;case"support_idea":i=".flag-support-idea-"+t.contentId,o="support";break;case"following_idea":i=".flag-following-idea-"+t.contentId,o="follow"}s=l(i),e(o,i,n,s)})}),a.fn.stopBodyScroll=function(){a(this).closest("body").toggleClass("stop-scrolling")}}(jQuery),function(a){"use strict";var e=(a(window),a(document));e.ready(function(a){function e(){n.css("display","block"),n.animate({opacity:"1"},100),t.animate({left:"0"},150),a("body").addClass("stop-scrolling")}function l(){n.css({display:"none",opacity:"0"}),t.animate({left:i},200),a("body").removeClass("stop-scrolling")}var t=a("nav.slider-mobile"),n=a(".overlay"),i=t.css("left");a("#nav-hamburger").click(function(a){a.preventDefault(),e()}),a("#nav-mobile-close, .overlay").click(function(a){a.preventDefault(),l()})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsInNsaWRlbmF2LmpzIl0sIm5hbWVzIjpbIiQiLCJpY29uU3VwcG9ydEFuZEZvbGxvd0ludGVyYWN0aW9uIiwiZmxhZ1R5cGUiLCJmbGFnQ2xhc3MiLCJmbGFnU3RhdHVzIiwiY2FyZFR5cGUiLCJjbGFzc1NpbXBsZSIsImNsYXNzRnVsbCIsInZhbHVlQ2xhc3MiLCJjb3VudGVyIiwiY2xhc3NGbGFnIiwicGFyZW50Iiwic2libGluZ3MiLCJwYXJzZUludCIsImZpcnN0IiwidGV4dCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJnZXRDYXJkVHlwZSIsImZsYWdQYXJlbnQiLCJoYXNDbGFzcyIsImRvYyIsIndpbmRvdyIsImRvY3VtZW50IiwicmVhZHkiLCJmaW5kIiwibGVuZ3RoIiwiaG92ZXIiLCJ0aGlzIiwibmV4dCIsInN0b3AiLCJhbmltYXRlIiwibWF4LXdpZHRoIiwicGFkZGluZyIsImVhY2giLCJpbmRleCIsImVsIiwiaW1nU3JjIiwiYXR0ciIsImNzcyIsImJhY2tncm91bmQtaW1hZ2UiLCJyZW1vdmUiLCJwb3BvdmVyIiwiaW5zZXJ0QWZ0ZXIiLCJ0b29sdGlwIiwicGxhY2VtZW50IiwidGl0bGUiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0cmlnZ2VyIiwic3RvcFByb3BhZ2F0aW9uIiwiZWxlbVRvQ2xpY2siLCJvbiIsImUiLCJ0YXJnZXQiLCJmaWx0ZXIiLCJjb21tZW50X3VybCIsImxvY2F0aW9uIiwiaHJlZiIsImxpbmsiLCJiaW5kIiwiZGF0YSIsInN0YXR1cyIsImZsYWdOYW1lIiwiY29udGVudElkIiwiZm4iLCJzdG9wQm9keVNjcm9sbCIsImNsb3Nlc3QiLCJ0b2dnbGVDbGFzcyIsImpRdWVyeSIsIm9wZW5OYXZBbmRPdmVybGF5Iiwib3ZlcmxheSIsIm9wYWNpdHkiLCJuYXYiLCJsZWZ0IiwiY2xvc2VOYXZBbmRPdmVybGF5IiwiZGlzcGxheSIsImxlZnROYXYiXSwibWFwcGluZ3MiOiJD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QUNBOEUsRUFBQUosRUFBQW5DLElBQUEsT0FFQXZDLEdBQUEsa0JBQUErQyxNQUFBLFNBQUFPLEdBQ0FBLEVBQUFMLGlCQUNBc0IsTUFHQXZFLEVBQUEsK0JBQUErQyxNQUFBLFNBQUFPLEdBQ0FBLEVBQUFMLGlCQUNBMkIsU0FtQ0FOIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCkge1xuXG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgd2luID0gJCh3aW5kb3cpO1xuICB2YXIgZG9jID0gJChkb2N1bWVudCk7XG5cbiAgZG9jLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gIC8vQWRkIGNsYXNzIHRvIGRpc2N1c3Npb24gYW5kIGRvY3VtZW50c1xuICBpZiAoJCgnKicpLmZpbmQoJy5ub2RlLXR5cGUtY29udmVyc2F0aW9uJykubGVuZ3RoID4wKXtcbiAgICAkKCBcIi51aS1tZW51LWNvbGxhYm9yYXRpb24tZGlzY3Vzc2lvblwiICkuYWRkQ2xhc3MoIFwiYWN0aXZlXCIgKTtcbiAgfVxuICBpZiAoJCgnKicpLmZpbmQoJy5ub2RlLXR5cGUta25vd2xlZGdlLW9iamVjdCcpLmxlbmd0aCA+MCl7XG4gICAgJCggXCIudWktbWVudS1jb2xsYWJvcmF0aW9uLWRvY3VtZW50c1wiICkuYWRkQ2xhc3MoIFwiYWN0aXZlXCIgKTtcbiAgfVxuXG4gIC8vQ0FSRFNcbiAvLyBDb2NrYWRlIGFuaW1hdGlvbnMgZm9yIGNhcmRcblxuICAkKCcuY29ja2FkZScpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAkKHRoaXMpLm5leHQoKS5zdG9wKCkuYW5pbWF0ZShcbiAgICAgICAgIHsgXCJtYXgtd2lkdGhcIjogXCIxMDAlXCIsIFwicGFkZGluZ1wiOiBcIjVweCA2cHggNXB4IDQwcHhcIiB9XG4gICAgICAgICwnZmFzdCcpO1xuICB9LCBmdW5jdGlvbigpIHtcbiAgICAgJCh0aGlzKS5uZXh0KCkuc3RvcCgpLmFuaW1hdGUoXG4gICAgICAgIHsgXCJtYXgtd2lkdGhcIjogXCIwXCIsIFwicGFkZGluZ1wiOiBcIjVweCAwXCIgfVxuICAgICAgICAsJ2Zhc3QnKTtcbiAgfSk7XG5cblxuICAvLyBTZXQgY2FyZCBpbWdzIGFzIGEgYmFja2dyb3VuZCBvbiB0aGUgbGluayB0byBoZWxwIHJlc3BvbnNpdmVuZXNzXG4gICQoJy5jYXJkIGltZywgLmZ1bGwtd2lkdGgtY2FyZCBpbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xuICAgIHZhciBpbWdTcmMgPSAkKHRoaXMpLmF0dHIoJ3NyYycpO1xuXG4gICAgJCh0aGlzKS5wYXJlbnQoJ2EnKS5jc3Moe1xuICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKFwiJyArIGltZ1NyYyArICdcIiknXG4gICAgfSk7XG5cbiAgICAkKHRoaXMpLnJlbW92ZSgpO1xuXG4gIH0pO1xuXG5cbiAgLy9BZGQgaG92ZXIgb24gY2FyZCBmb290ZXIvYXNpZGVcbiAgJCgnLmNhcmQtbGFyZ2UtbGluaywgLmNhcmQtZnVsbC1saW5rLCAuc21hbGwtY2FyZC1saW5rLCAuc2lkZWJhci0yIC5zdGF0LWxhYmVsLCAuc2lkZWJhci0yIC5uYXYgbGkgJykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5maW5kKCdhICwgLnZhbHVlJykuY3NzKCdjb2xvcicsICcjMDA3NDZBJyk7XG4gIH0sIGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuZmluZCgnYSAsIC52YWx1ZScpLmNzcygnY29sb3InLCAnaW5oZXJpdCcpO1xuICB9KTtcblxuICAgLy9DaGFsbGVuZ2UgYW5kIENvbGxhYm9yYXRpb24gUG9wb3ZlclxuICAkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3ZlcigpO1xuXG4gIC8vTW92ZSBzZWNvbmRhcnkgdGFiIHBhZ2Ugb24gc2VhcmNoIGJlbG93IGFkdmFuY2VkIHNlYXJjaC5cbiAgJCgnLnBhZ2Utc2VhcmNoIC5uYXYtdGFicycpLmluc2VydEFmdGVyKCcjc2VhcmNoLWZvcm0nKTtcblxuICAvL1Rvb2x0aXAgZm9yIHB1Ymxpc2hpbmcgYSBwcm9tb3RlIGlkZWFcbiAgJCgnLnBhZ2Utbm9kZS1lZGl0Lm5vZGUtdHlwZS1odWIgLm5hdiBhW2hyZWY9XCIjZWRpdC1vcHRpb25zXCJdJykudG9vbHRpcCh7XG4gICAgcGxhY2VtZW50OiAncmlnaHQnLFxuICAgIHRpdGxlOiAnUGxlYXNlIHJldmlldyB0aGUgcHVibGlzaGluZyBvcHRpb25zIGJlZm9yZSBmaW5hbGlzaW5nIHRoZSBwcm9tb3Rpb24gb2YgdGhpcyBpZGVhLiBCeSBkZWZhdWx0LCBpdCB3aWxsIGJlIHVucHVibGlzaGVkIGFuZCB0aHVzIG5vdCB2aXNpYmxlIG9uIHRoZSB3ZWJzaXRlLidcbiAgfSlcblxuICAvL1RyaWdnZXIgc3VwcG9ydC9mb2xsb3cgZXZlbnQgd2hlbiBjbGljayBvbiBpY29uXG4gICAkKCcuZXZlbnQgYVtjbGFzc149XCJpY29uLVwiXSwgLmV2ZW50IGFbY2xhc3MqPVwiIGljb24tXCJdJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5mbGFnLXdyYXBwZXIgYScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSk7XG5cbi8vIFRyaWdnZXIgdG8gZmlyZSBldmVudCBvbiBkaXYgb24gZm9sbG93IGFuZCBzdXBwb3J0IGV2ZW50XG4gIHZhciBlbGVtVG9DbGljayA9ICcuZm9sbG93LmV2ZW50LCAuZm9sbG93LmV2ZW50IC5mbGFnLXdyYXBwZXIsIC5zdXBwb3J0LmV2ZW50LCAuc3VwcG9ydC5ldmVudCAuZmxhZy13cmFwcGVyICc7XG5cbiAgZG9jLm9uKCdjbGljaycsIGVsZW1Ub0NsaWNrICwgZnVuY3Rpb24oZSkge1xuICAgIGlmKGUudGFyZ2V0ID09IHRoaXMpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQodGhpcykuZmluZCgnYScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfVxuICB9KTtcblxuXG4gICQoJy5mb2xsb3cuZXZlbnQsIC5zdXBwb3J0LmV2ZW50Jykub24oJ2NsaWNrJywgJy5mbGFnLXdyYXBwZXIgYScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0pO1xuXG4gLy8gRmlyZSBjb21tZW50IGxpbmsgb24gY2FyZHNcblxuICAkKCcuY29tbWVudCcpLmZpbHRlcignLnNtYWxsLWNhcmQtbGluaywuY2FyZC1sYXJnZS1saW5rLC5jYXJkLWZ1bGwtbGluaycpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgY29tbWVudF91cmwgPSAkKHRoaXMpLmZpbmQoJy5pY29uLWRpYWxvZ3VlJykuYXR0cignaHJlZicpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29tbWVudF91cmw7XG4gIH0pO1xuXG4vL0xpbmtzIE9uIGluZGl2aWR1YWwgY2hhbGxlbmdlLCBpZGVhIGFuZCBjb2xsYWJvcmF0aW9uIHBhZ2VzXG4vL0xpbmsgTGFyZ2UgY2FyZCBpZGVhc1xuICAkKFwiLmlkZWFzLmNhcmQtbGFyZ2UtbGluaywgLnNoYXJlIC5zdGF0LWxhYmVsLCAubWFpbCAuc3RhdC1sYWJlbCwgLnNpZGViYXItMiB1bCBsaVwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGxpbmsgPSAkKHRoaXMpLmZpbmQoJ2EnKS5hdHRyKCdocmVmJyk7XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsaW5rO1xuICB9KTtcblxuXG4gIC8qIEZMQUcgU3VwcG9ydC9Gb2xsb3cgUmVzcG9uc2UgKi9cbiAgZG9jLmJpbmQoJ2ZsYWdHbG9iYWxBZnRlckxpbmtVcGRhdGUnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuXG4gICAgdmFyIHN0YXR1cyA9IGRhdGEuZmxhZ1N0YXR1cztcbiAgICB2YXIgZmxhZ0NsYXNzID0gJyc7XG4gICAgdmFyIGZsYWdUeXBlID0gJyc7XG4gICAgdmFyIGNhcmRUeXBlID0gJyc7XG5cblxuICAgIHN3aXRjaCAoZGF0YS5mbGFnTmFtZSkge1xuICAgICAgY2FzZSAnc3VwcG9ydF9jb2xsYWJvcmF0aW9uJzogLy9DYXJkIG9uIENvbGxhYm9yYXRpb24gcGFnZVxuICAgICAgICBmbGFnQ2xhc3MgPSAnLmZsYWctc3VwcG9ydC1jb2xsYWJvcmF0aW9uLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnc3VwcG9ydCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdmb2xsb3dfY29sbGFib3JhdGlvbic6IC8vQ2FyZCBvbiBDb2xsYWJvcmF0aW9uIHBhZ2VcbiAgICAgICAgZmxhZ0NsYXNzID0gJy5mbGFnLWZvbGxvdy1jb2xsYWJvcmF0aW9uLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnZm9sbG93JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NoYWxsZW5nZV9mbGFnJzogLy9JbmRpdmlkdWFsIGNoYWxsZW5nZSBwYWdlXG4gICAgICAgIGZsYWdDbGFzcyA9ICcuZmxhZy1jaGFsbGVuZ2UtZmxhZy0nICsgZGF0YS5jb250ZW50SWQ7XG4gICAgICAgIGZsYWdUeXBlID0gJ2ZvbGxvdyc7XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3N1cHBvcnRfaWRlYSc6IC8vQ2FyZCBvbiBDb2xsYWJvcmF0aW9uIHBhZ2VcbiAgICAgICAgZmxhZ0NsYXNzID0gJy5mbGFnLXN1cHBvcnQtaWRlYS0nICsgZGF0YS5jb250ZW50SWQ7XG4gICAgICAgIGZsYWdUeXBlID0gJ3N1cHBvcnQnXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdmb2xsb3dpbmdfaWRlYSc6IC8vQ2FyZCBvbiBDb2xsYWJvcmF0aW9uIHBhZ2VcbiAgICAgICAgZmxhZ0NsYXNzID0gJy5mbGFnLWZvbGxvd2luZy1pZGVhLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnZm9sbG93JztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy9HZXQgQ2FyZCBUeXBlXG4gICAgY2FyZFR5cGUgPSBnZXRDYXJkVHlwZShmbGFnQ2xhc3MpO1xuICAgIGljb25TdXBwb3J0QW5kRm9sbG93SW50ZXJhY3Rpb24oZmxhZ1R5cGUsIGZsYWdDbGFzcywgc3RhdHVzLCBjYXJkVHlwZSk7XG5cbiAgfSk7XG5cbn0pO1xuXG4vL0NoYW5nZXMgZmxhZyBpY29ucyBvbiBzdXBwb3J0L3Vuc3VwcG9ydCBhbmQgZm9sbG93L3VuZm9sbG93XG5mdW5jdGlvbiBpY29uU3VwcG9ydEFuZEZvbGxvd0ludGVyYWN0aW9uKGZsYWdUeXBlLCBmbGFnQ2xhc3MsIGZsYWdTdGF0dXMsIGNhcmRUeXBlKSB7XG4gIHZhciBjbGFzc1NpbXBsZSA9ICcnO1xuICB2YXIgY2xhc3NGdWxsID0gJyc7XG4gIHZhciB2YWx1ZUNsYXNzID0gJyc7XG4gIHZhciBjb3VudGVyID0gMDtcbiAgdmFyIGNsYXNzRmxhZyA9ICdmbGFnZ2VkJztcblxuICBpZiAoZmxhZ1R5cGUgPT09ICdmb2xsb3cnKSB7XG4gICAgY2xhc3NTaW1wbGUgPSAnaWNvbi1leWUnO1xuICAgIGNsYXNzRnVsbCA9ICdpY29uLWV5ZS1mdWxsIGZsYWdnZWQnO1xuXG4gIH0gZWxzZSBpZiAoIGZsYWdUeXBlID09PSAnc3VwcG9ydCcgICkge1xuICAgIGNsYXNzU2ltcGxlID0gJ2ljb24taGVhcnQnO1xuICAgIGNsYXNzRnVsbCA9ICdpY29uLWhlYXJ0LWZ1bGwgZmxhZ2dlZCc7XG4gIH1cblxuICBpZihjYXJkVHlwZSA9PSAnc2lkZWJhcicpIHtcbiAgICB2YWx1ZUNsYXNzID0gJChmbGFnQ2xhc3MpLnBhcmVudCgpLnNpYmxpbmdzKCcudmFsdWUnKTtcbiAgfSBlbHNlIHtcbiAgICB2YWx1ZUNsYXNzID0gJChmbGFnQ2xhc3MpLnNpYmxpbmdzKCcudmFsdWUnKTtcbiAgfVxuXG4gIHZhciBjb3VudGVyID0gIHBhcnNlSW50KCB2YWx1ZUNsYXNzLmZpcnN0KCkudGV4dCgpICk7XG5cbiAgaWYoIGZsYWdTdGF0dXMgPT0gJ2ZsYWdnZWQnICkge1xuICAgICQoZmxhZ0NsYXNzKS5zaWJsaW5ncygnW2NsYXNzXj1cImljb24tXCJdJykuYWRkQ2xhc3MoY2xhc3NGdWxsKTtcbiAgICB2YWx1ZUNsYXNzLmFkZENsYXNzKGNsYXNzRmxhZyk7XG4gICAgJChmbGFnQ2xhc3MpLnNpYmxpbmdzKCdbY2xhc3NePVwiaWNvbi1cIl0nKS5yZW1vdmVDbGFzcyhjbGFzc1NpbXBsZSk7XG4gICAgY291bnRlciA9ICBjb3VudGVyICsgMTtcbiAgfSBlbHNlIHtcbiAgICAkKGZsYWdDbGFzcykuc2libGluZ3MoJ1tjbGFzc149XCJpY29uLVwiXScpLmFkZENsYXNzKGNsYXNzU2ltcGxlKTtcbiAgICAkKGZsYWdDbGFzcykuc2libGluZ3MoJ1tjbGFzc149XCJpY29uLVwiXScpLnJlbW92ZUNsYXNzKGNsYXNzRnVsbCk7XG4gICAgdmFsdWVDbGFzcy5yZW1vdmVDbGFzcyhjbGFzc0ZsYWcpO1xuICAgIGNvdW50ZXIgPSAgY291bnRlciAtIDE7XG4gIH1cblxuICB2YWx1ZUNsYXNzLnRleHQoIGNvdW50ZXIgKTtcblxufVxuXG4vL0dldCB0aGUgY2FyZCB0eXBlIGJhc2VkIG9uIHRoZSBsaW5rIHR5cGVcbmZ1bmN0aW9uIGdldENhcmRUeXBlKGZsYWdDbGFzcyl7XG4gIHZhciBmbGFnUGFyZW50ID0gJChmbGFnQ2xhc3MpLnBhcmVudCgpO1xuXG4gIGlmKCBmbGFnUGFyZW50Lmhhc0NsYXNzKCdzaWRlYmFyLWxpbmsnKSApe1xuICAgIHJldHVybiAnc2lkZWJhcic7XG4gIH0gZWxzZSBpZiggZmxhZ1BhcmVudC5oYXNDbGFzcygnY2FyZC1mdWxsLWxpbmsnKSApe1xuICAgIHJldHVybiAnY2FyZC1mdWxsJztcbiAgfSBlbHNlIGlmICggZmxhZ1BhcmVudC5oYXNDbGFzcygnY2FyZC1sYXJnZS1saW5rJykgKSB7XG4gICAgcmV0dXJuICdjYXJkLWxhcmdlJztcbiAgfSBlbHNlIGlmICggZmxhZ1BhcmVudC5oYXNDbGFzcygnY2FyZC1zbWFsbC1saW5rJykgKSB7XG4gICAgcmV0dXJuICdjYXJkLXNtYWxsJ1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLy9TdG9wIGJvZHkgc2Nyb2xsaW5nXG4kLmZuLnN0b3BCb2R5U2Nyb2xsID0gIGZ1bmN0aW9uKCkge1xuICAkKHRoaXMpLmNsb3Nlc3QoJ2JvZHknKS50b2dnbGVDbGFzcygnc3RvcC1zY3JvbGxpbmcnKTtcbn1cblxufSkoalF1ZXJ5KTtcbiIsIi8qIE1vYmlsZSBtZW51IHNsaWRlICovXG5cbihmdW5jdGlvbiAoJCkge1x0XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgd2luID0gJCh3aW5kb3cpO1xuICB2YXIgZG9jID0gJChkb2N1bWVudCk7XG5cbiAgZG9jLnJlYWR5KGZ1bmN0aW9uKCQpIHtcbiAgXHR2YXIgbmF2ID0gJChcIm5hdi5zbGlkZXItbW9iaWxlXCIpO1xuICBcdHZhciBvdmVybGF5ID0gJCgnLm92ZXJsYXknKTtcbiAgXHR2YXIgbGVmdE5hdiA9IG5hdi5jc3MoJ2xlZnQnKTtcblxuICBcdCQoJyNuYXYtaGFtYnVyZ2VyJykuY2xpY2soZnVuY3Rpb24oZSkge1xuICBcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBcdFx0b3Blbk5hdkFuZE92ZXJsYXkoKTtcbiAgXHR9KTtcblxuICBcdCQoJyNuYXYtbW9iaWxlLWNsb3NlLCAub3ZlcmxheScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdGNsb3NlTmF2QW5kT3ZlcmxheSgpO1xuICBcdH0pO1xuXG4gIFx0Ly9EaXNwbGF5IHNpZGVOYXYgYW5kICBvdmVybGF5XG4gIFx0ZnVuY3Rpb24gb3Blbk5hdkFuZE92ZXJsYXkoKSB7XG4gIFx0ICBvdmVybGF5LmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICBcdCAgb3ZlcmxheS5hbmltYXRlKHtcbiAgXHQgIFx0b3BhY2l0eTogJzEnIFxuICBcdCAgfSwgMTAwKVxuXG4gIFx0ICBuYXYuYW5pbWF0ZSh7XG4gIFx0ICAgIGxlZnQ6ICcwJ1xuICBcdCAgfSwgMTUwKTsgXG5cbiAgICAgIC8vRGlzYWJsZSBzY3JvbGwgZm9yIGJhY2tncm91bmQgcGFnZVxuICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdzdG9wLXNjcm9sbGluZycpO1xuXHQgIH1cblx0IFxuICBcdC8vSGlkZSBzaWRlTmF2IGFuZCBvdmVybGF5XG4gIFx0ZnVuY3Rpb24gY2xvc2VOYXZBbmRPdmVybGF5KCl7XG4gIFx0ICBvdmVybGF5LmNzcyh7XG4gIFx0ICBcdGRpc3BsYXk6ICdub25lJyxcbiAgXHQgIFx0b3BhY2l0eTogJzAnXG4gIFx0ICB9KTtcblxuICBcdCAgbmF2LmFuaW1hdGUoe1xuICBcdCAgIGxlZnQ6IGxlZnROYXZcbiAgXHQgICAgfSwgMjAwKTsgXG4gICAgICBcbiAgICAgICAvL0VuYWJsZSBzY3JvbGwgZm9yIGJhY2tncm91bmQgcGFnZVxuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdzdG9wLXNjcm9sbGluZycpO1xuICBcdH1cbiAgXHRcbiAgfSk7XG5cbn0pKGpRdWVyeSk7XG4iXX0=
