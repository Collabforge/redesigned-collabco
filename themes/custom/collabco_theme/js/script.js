!function(a){"use strict";function e(e,t,l,n){var i="",o="",s="",r=0,c="flagged";"follow"===e?(i="icon-eye",o="icon-eye-full flagged"):"support"===e&&(i="icon-heart",o="icon-heart-full flagged"),s="sidebar"==n?a(t).parent().siblings(".value"):a(t).siblings(".value");var r=parseInt(s.first().text());"flagged"==l?(a(t).siblings('[class^="icon-"]').addClass(o),s.addClass(c),a(t).siblings('[class^="icon-"]').removeClass(i),r+=1):(a(t).siblings('[class^="icon-"]').addClass(i),a(t).siblings('[class^="icon-"]').removeClass(o),s.removeClass(c),r-=1),s.text(r)}function t(e){var t=a(e).parent();return t.hasClass("sidebar-link")?"sidebar":t.hasClass("card-full-link")?"card-full":t.hasClass("card-large-link")?"card-large":t.hasClass("card-small-link")?"card-small":null}var l=(a(window),a(document));l.ready(function(){a("*").find(".node-type-conversation").length>0&&a(".ui-menu-collaboration-discussion").addClass("active"),a("*").find(".node-type-knowledge-object").length>0&&a(".ui-menu-collaboration-documents").addClass("active"),a(".cockade").hover(function(){a(this).next().stop().animate({"max-width":"100%",padding:"5px 6px 5px 40px"},"fast")},function(){a(this).next().stop().animate({"max-width":"0",padding:"5px 0"},"fast")}),a(".card img, .full-width-card img").each(function(e,t){var l=a(this).attr("src");a(this).parent("a").css({"background-image":'url("'+l+'")'}),a(this).remove()}),a(".card-large-link, .card-full-link, .small-card-link, .sidebar-2 .stat-label, .sidebar-2 .nav li ").hover(function(){a(this).find("a , .value").css("color","#00746A")},function(){a(this).find("a , .value").css("color","inherit")}),a('[data-toggle="popover"]').popover(),a(".page-search .nav-tabs").insertAfter("#search-form"),a('.page-node-edit.node-type-hub .nav a[href="#edit-options"]').tooltip({placement:"right",title:"Please review the publishing options before finalising the promotion of this idea. By default, it will be unpublished and thus not visible on the website."}),a('.event a[class^="icon-"], .event a[class*=" icon-"]').click(function(e){e.preventDefault(),a(this).parent().find(".flag-wrapper a").trigger("click"),e.stopPropagation()});var n=".follow.event, .follow.event .flag-wrapper, .support.event, .support.event .flag-wrapper ";l.on("click",n,function(e){e.target==this&&(e.preventDefault(),a(this).find("a").trigger("click"))}),a(".follow.event, .support.event").on("click",".flag-wrapper a",function(a){a.stopPropagation()}),a(".comment").filter(".small-card-link,.card-large-link,.card-full-link").click(function(){event.preventDefault();var e=a(this).find(".icon-dialogue").attr("href");window.location.href=e}),a(".ideas.card-large-link, .share .stat-label, .mail .stat-label, .sidebar-2 ul li").click(function(){event.preventDefault();var e=a(this).find("a").attr("href");window.location.href=e}),l.bind("flagGlobalAfterLinkUpdate",function(a,l){var n=l.flagStatus,i="",o="",s="";switch(l.flagName){case"support_collaboration":i=".flag-support-collaboration-"+l.contentId,o="support";break;case"follow_collaboration":i=".flag-follow-collaboration-"+l.contentId,o="follow";break;case"challenge_flag":i=".flag-challenge-flag-"+l.contentId,o="follow";break;case"support_idea":i=".flag-support-idea-"+l.contentId,o="support";break;case"following_idea":i=".flag-following-idea-"+l.contentId,o="follow"}s=t(i),e(o,i,n,s)})}),a.fn.updateBackgroundHeader=function(){var e=a(this),t=e.data("background");if(t){var l=(e.data("type"),e.closest(".full-width-top")),n=l.css("background-image");l.css("background-image",n+', url("'+t+'")')}},a.fn.stopBodyScroll=function(){a(this).closest("body").toggleClass("stop-scrolling")},a.fn.equalHeights=function(){var e=0;return a(this).each(function(t,l){var n=a(this).outerHeight(!0);n>e&&(e=n)}),e}}(jQuery),function(a){"use strict";var e=(a(window),a(document));e.ready(function(a){function e(){n.css("display","block"),n.animate({opacity:"1"},100),l.animate({left:"0"},150),a("body").addClass("stop-scrolling")}function t(){n.css({display:"none",opacity:"0"}),l.animate({left:i},200),a("body").removeClass("stop-scrolling")}var l=a("nav.slider-mobile"),n=a(".overlay"),i=l.css("left");a("#nav-hamburger").click(function(a){a.preventDefault(),e()}),a("#nav-mobile-close, .overlay").click(function(a){a.preventDefault(),t()})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsInNsaWRlbmF2LmpzIl0sIm5hbWVzIjpbIiQiLCJpY29uU3VwcG9ydEFuZEZvbGxvd0ludGVyYWN0aW9uIiwiZmxhZ1R5cGUiLCJmbGFnQ2xhc3MiLCJmbGFnU3RhdHVzIiwiY2FyZFR5cGUiLCJjbGFzc1NpbXBsZSIsImNsYXNzRnVsbCIsInZhbHVlQ2xhc3MiLCJjb3VudGVyIiwiY2xhc3NGbGFnIiwicGFyZW50Iiwic2libGluZ3MiLCJwYXJzZUludCIsImZpcnN0IiwidGV4dCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJnZXRDYXJkVHlwZSIsImZsYWdQYXJlbnQiLCJoYXNDbGFzcyIsImRvYyIsIndpbmRvdyIsImRvY3VtZW50IiwicmVhZHkiLCJmaW5kIiwibGVuZ3RoIiwiaG92ZXIiLCJ0aGlzIiwibmV4dCIsInN0b3AiLCJhbmltYXRlIiwibWF4LXdpZHRoIiwicGFkZGluZyIsImVhY2giLCJpbmRleCIsImVsIiwiaW1nU3JjIiwiYXR0ciIsImNzcyIsImJhY2tncm91bmQtaW1hZ2UiLCJyZW1vdmUiLCJwb3BvdmVyIiwiaW5zZXJ0QWZ0ZXIiLCJ0b29sdGlwIiwicGxhY2VtZW50IiwidGl0bGUiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0cmlnZ2VyIiwic3RvcFByb3BhZ2F0aW9uIiwiZWxlbVRvQ2xpY2siLCJvbiIsImUiLCJ0YXJnZXQiLCJmaWx0ZXIiLCJjb21tZW50X3VybCIsImxvY2F0aW9uIiwiaHJlZiIsImxpbmsiLCJiaW5kIiwiZGF0YSIsInN0YXR1cyIsImZsYWdOYW1lIiwiY29udGVudElkIiwiZm4iLCJ1cGRhdGVCYWNrZ3JvdW5kSGVhZGVyIiwiY29udGFpbmVyIiwiZGF0YUJnIiwiY2xvc2VzdEZ1bGxXaWR0aFRvcCIsImNsb3Nlc3QiLCJjb2xvckJhY2tncm91bmQiLCJzdG9wQm9keVNjcm9sbCIsInRvZ2dsZUNsYXNzIiwiZXF1YWxIZWlnaHRzIiwidGFsbGVzdEhlaWdodCIsImhlaWdodCIsIm91dGVySGVpZ2h0IiwialF1ZXJ5Iiwib3Blbk5hdkFuZE92ZXJsYXkiLCJvdmVybGF5Iiwib3BhY2l0eSIsIm5hdiIsImxlZnQiLCJjbG9zZU5hdkFuZE92ZXJsYXkiLCJkaXNwbGF5IiwibGVmdE5hdiJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsR0FFQSxZQW9KQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBLEdBQ0FDLEVBQUEsRUFDQUMsRUFBQSxTQUVBLFlBQUFSLEdBQ0FJLEVBQUEsV0FDQUMsRUFBQSx5QkFFQSxZQUFBTCxJQUNBSSxFQUFBLGFBQ0FDLEVBQUEsMkJBSUFDLEVBREEsV0FBQUgsRUFDQUwsRUFBQUcsR0FBQVEsU0FBQUMsU0FBQSxVQUVBWixFQUFBRyxHQUFBUyxTQUFBLFNBR0EsSUFBQUgsR0FBQUksU0FBQUwsRUFBQU0sUUFBQUMsT0FFQSxZQUFBWCxHQUNBSixFQUFBRyxHQUFBUyxTQUFBLG9CQUFBSSxTQUFBVCxHQUNBQyxFQUFBUSxTQUFBTixHQUNBVixFQUFBRyxHQUFBUyxTQUFBLG9CQUFBSyxZQUFBWCxHQUNBRyxHQUFBLElBRUFULEVBQUFHLEdBQUFTLFNBQUEsb0JBQUFJLFNBQUFWLEdBQ0FOLEVBQUFHLEdBQUFTLFNBQUEsb0JBQUFLLFlBQUFWLEdBQ0FDLEVBQUFTLFlBQUFQLEdBQ0FELEdBQUEsR0FHQUQsRUFBQU8sS0FBQU4sR0FLQSxRQUFBUyxHQUFBZixHQUNBLEdBQUFnQixHQUFBbkIsRUFBQUcsR0FBQVEsUUFFQSxPQUFBUSxHQUFBQyxTQUFBLGdCQUNBLFVBQ0FELEVBQUFDLFNBQUEsa0JBQ0EsWUFDQUQsRUFBQUMsU0FBQSxtQkFDQSxhQUNBRCxFQUFBQyxTQUFBLG1CQUNBLGFBR0EsS0F6TUEsR0FDQUMsSUFEQXJCLEVBQUFzQixRQUNBdEIsRUFBQXVCLFVBRUFGLEdBQUFHLE1BQUEsV0FHQXhCLEVBQUEsS0FBQXlCLEtBQUEsMkJBQUFDLE9BQUEsR0FD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QUFBUyxhQUFBLFdBQ0EsR0FBQUMsR0FBQSxDQVFBLE9BUEE1RSxHQUFBNEIsTUFBQU0sS0FBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUF5QyxHQUFBN0UsRUFBQTRCLE1BQUFrRCxhQUFBLEVBQ0FELEdBQUFELElBQ0FBLEVBQUFDLEtBSUFELElBR0FHLFFDblFBLFNBQUEvRSxHQUNBLFlBQ0EsSUFDQXFCLElBREFyQixFQUFBc0IsUUFDQXRCLEVBQUF1QixVQUVBRixHQUFBRyxNQUFBLFNBQUF4QixHQWdCQSxRQUFBZ0YsS0FDQUMsRUFBQTFDLElBQUEsVUFBQSxTQUNBMEMsRUFBQWxELFNBQ0FtRCxRQUFBLEtBQ0EsS0FFQUMsRUFBQXBELFNBQ0FxRCxLQUFBLEtBQ0EsS0FHQXBGLEVBQUEsUUFBQWdCLFNBQUEsa0JBSUEsUUFBQXFFLEtBQ0FKLEVBQUExQyxLQUNBK0MsUUFBQSxPQUNBSixRQUFBLE1BR0FDLEVBQUFwRCxTQUNBcUQsS0FBQUcsR0FDQSxLQUdBdkYsRUFBQSxRQUFBaUIsWUFBQSxrQkF6Q0EsR0FBQWtFLEdBQUFuRixFQUFBLHFCQUNBaUYsRUFBQWpGLEVBQUEsWUFDQXVGLEVBQUFKLEVBQUE1QyxJQUFBLE9BRUF2QyxHQUFBLGtCQUFBK0MsTUFBQSxTQUFBTyxHQUNBQSxFQUFBTCxpQkFDQStCLE1BR0FoRixFQUFBLCtCQUFBK0MsTUFBQSxTQUFBTyxHQUNBQSxFQUFBTCxpQkFDQW9DLFNBbUNBTiIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQpIHtcblxuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIHdpbiA9ICQod2luZG93KTtcbiAgdmFyIGRvYyA9ICQoZG9jdW1lbnQpO1xuXG4gIGRvYy5yZWFkeShmdW5jdGlvbigpIHtcblxuICAvL0FkZCBjbGFzcyB0byBkaXNjdXNzaW9uIGFuZCBkb2N1bWVudHNcbiAgaWYgKCQoJyonKS5maW5kKCcubm9kZS10eXBlLWNvbnZlcnNhdGlvbicpLmxlbmd0aCA+MCl7XG4gICAgJCggXCIudWktbWVudS1jb2xsYWJvcmF0aW9uLWRpc2N1c3Npb25cIiApLmFkZENsYXNzKCBcImFjdGl2ZVwiICk7XG4gIH1cbiAgaWYgKCQoJyonKS5maW5kKCcubm9kZS10eXBlLWtub3dsZWRnZS1vYmplY3QnKS5sZW5ndGggPjApe1xuICAgICQoIFwiLnVpLW1lbnUtY29sbGFib3JhdGlvbi1kb2N1bWVudHNcIiApLmFkZENsYXNzKCBcImFjdGl2ZVwiICk7XG4gIH1cblxuICAvL0NBUkRTXG4gLy8gQ29ja2FkZSBhbmltYXRpb25zIGZvciBjYXJkXG5cbiAgJCgnLmNvY2thZGUnKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgJCh0aGlzKS5uZXh0KCkuc3RvcCgpLmFuaW1hdGUoXG4gICAgICAgICB7IFwibWF4LXdpZHRoXCI6IFwiMTAwJVwiLCBcInBhZGRpbmdcIjogXCI1cHggNnB4IDVweCA0MHB4XCIgfVxuICAgICAgICAsJ2Zhc3QnKTtcbiAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICQodGhpcykubmV4dCgpLnN0b3AoKS5hbmltYXRlKFxuICAgICAgICB7IFwibWF4LXdpZHRoXCI6IFwiMFwiLCBcInBhZGRpbmdcIjogXCI1cHggMFwiIH1cbiAgICAgICAgLCdmYXN0Jyk7XG4gIH0pO1xuXG5cbiAgLy8gU2V0IGNhcmQgaW1ncyBhcyBhIGJhY2tncm91bmQgb24gdGhlIGxpbmsgdG8gaGVscCByZXNwb25zaXZlbmVzc1xuICAkKCcuY2FyZCBpbWcsIC5mdWxsLXdpZHRoLWNhcmQgaW1nJykuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcbiAgICB2YXIgaW1nU3JjID0gJCh0aGlzKS5hdHRyKCdzcmMnKTtcblxuICAgICQodGhpcykucGFyZW50KCdhJykuY3NzKHtcbiAgICAgICdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybChcIicgKyBpbWdTcmMgKyAnXCIpJ1xuICAgIH0pO1xuXG4gICAgJCh0aGlzKS5yZW1vdmUoKTtcblxuICB9KTtcblxuXG4gIC8vQWRkIGhvdmVyIG9uIGNhcmQgZm9vdGVyL2FzaWRlXG4gICQoJy5jYXJkLWxhcmdlLWxpbmssIC5jYXJkLWZ1bGwtbGluaywgLnNtYWxsLWNhcmQtbGluaywgLnNpZGViYXItMiAuc3RhdC1sYWJlbCwgLnNpZGViYXItMiAubmF2IGxpICcpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuZmluZCgnYSAsIC52YWx1ZScpLmNzcygnY29sb3InLCAnIzAwNzQ2QScpO1xuICB9LCBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLmZpbmQoJ2EgLCAudmFsdWUnKS5jc3MoJ2NvbG9yJywgJ2luaGVyaXQnKTtcbiAgfSk7XG5cbiAgIC8vQ2hhbGxlbmdlIGFuZCBDb2xsYWJvcmF0aW9uIFBvcG92ZXJcbiAgJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLnBvcG92ZXIoKTtcblxuICAvL01vdmUgc2Vjb25kYXJ5IHRhYiBwYWdlIG9uIHNlYXJjaCBiZWxvdyBhZHZhbmNlZCBzZWFyY2guXG4gICQoJy5wYWdlLXNlYXJjaCAubmF2LXRhYnMnKS5pbnNlcnRBZnRlcignI3NlYXJjaC1mb3JtJyk7XG5cbiAgLy9Ub29sdGlwIGZvciBwdWJsaXNoaW5nIGEgcHJvbW90ZSBpZGVhXG4gICQoJy5wYWdlLW5vZGUtZWRpdC5ub2RlLXR5cGUtaHViIC5uYXYgYVtocmVmPVwiI2VkaXQtb3B0aW9uc1wiXScpLnRvb2x0aXAoe1xuICAgIHBsYWNlbWVudDogJ3JpZ2h0JyxcbiAgICB0aXRsZTogJ1BsZWFzZSByZXZpZXcgdGhlIHB1Ymxpc2hpbmcgb3B0aW9ucyBiZWZvcmUgZmluYWxpc2luZyB0aGUgcHJvbW90aW9uIG9mIHRoaXMgaWRlYS4gQnkgZGVmYXVsdCwgaXQgd2lsbCBiZSB1bnB1Ymxpc2hlZCBhbmQgdGh1cyBub3QgdmlzaWJsZSBvbiB0aGUgd2Vic2l0ZS4nXG4gIH0pXG5cbiAgLy9DaGFuZ2UgQmFja2dyb3VuZCBhbmQgYWRkIGltYWdlIHRvIEhlYWRlciBvbiBpbnZpZHVhbCBjb2xsYWJvcmF0ZSwgY2hhbGxlbmdlIGFuZCBpZGVhc1xuICAvLyAkKCcuZnVsbC13aWR0aC10b3AgLmNvbnRhaW5lcicpLnVwZGF0ZUJhY2tncm91bmRIZWFkZXIoKTtcblxuICAvL1RyaWdnZXIgc3VwcG9ydC9mb2xsb3cgZXZlbnQgd2hlbiBjbGljayBvbiBpY29uXG4gICAkKCcuZXZlbnQgYVtjbGFzc149XCJpY29uLVwiXSwgLmV2ZW50IGFbY2xhc3MqPVwiIGljb24tXCJdJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5mbGFnLXdyYXBwZXIgYScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfSk7XG5cbi8vIFRyaWdnZXIgdG8gZmlyZSBldmVudCBvbiBkaXYgb24gZm9sbG93IGFuZCBzdXBwb3J0IGV2ZW50XG4gIHZhciBlbGVtVG9DbGljayA9ICcuZm9sbG93LmV2ZW50LCAuZm9sbG93LmV2ZW50IC5mbGFnLXdyYXBwZXIsIC5zdXBwb3J0LmV2ZW50LCAuc3VwcG9ydC5ldmVudCAuZmxhZy13cmFwcGVyICc7XG5cbiAgZG9jLm9uKCdjbGljaycsIGVsZW1Ub0NsaWNrICwgZnVuY3Rpb24oZSkge1xuICAgIGlmKGUudGFyZ2V0ID09IHRoaXMpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICQodGhpcykuZmluZCgnYScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfVxuICB9KTtcblxuXG4gICQoJy5mb2xsb3cuZXZlbnQsIC5zdXBwb3J0LmV2ZW50Jykub24oJ2NsaWNrJywgJy5mbGFnLXdyYXBwZXIgYScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH0pO1xuXG4gLy8gRmlyZSBjb21tZW50IGxpbmsgb24gY2FyZHNcblxuICAkKCcuY29tbWVudCcpLmZpbHRlcignLnNtYWxsLWNhcmQtbGluaywuY2FyZC1sYXJnZS1saW5rLC5jYXJkLWZ1bGwtbGluaycpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgY29tbWVudF91cmwgPSAkKHRoaXMpLmZpbmQoJy5pY29uLWRpYWxvZ3VlJykuYXR0cignaHJlZicpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29tbWVudF91cmw7XG4gIH0pO1xuXG4vL0xpbmtzIE9uIGluZGl2aWR1YWwgY2hhbGxlbmdlLCBpZGVhIGFuZCBjb2xsYWJvcmF0aW9uIHBhZ2VzXG4vL0xpbmsgTGFyZ2UgY2FyZCBpZGVhc1xuICAkKFwiLmlkZWFzLmNhcmQtbGFyZ2UtbGluaywgLnNoYXJlIC5zdGF0LWxhYmVsLCAubWFpbCAuc3RhdC1sYWJlbCwgLnNpZGViYXItMiB1bCBsaVwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGxpbmsgPSAkKHRoaXMpLmZpbmQoJ2EnKS5hdHRyKCdocmVmJyk7XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsaW5rO1xuICB9KTtcblxuXG4gIC8qIEZMQUcgU3VwcG9ydC9Gb2xsb3cgUmVzcG9uc2UgKi9cbiAgZG9jLmJpbmQoJ2ZsYWdHbG9iYWxBZnRlckxpbmtVcGRhdGUnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuXG4gICAgdmFyIHN0YXR1cyA9IGRhdGEuZmxhZ1N0YXR1cztcbiAgICB2YXIgZmxhZ0NsYXNzID0gJyc7XG4gICAgdmFyIGZsYWdUeXBlID0gJyc7XG4gICAgdmFyIGNhcmRUeXBlID0gJyc7XG5cblxuICAgIHN3aXRjaCAoZGF0YS5mbGFnTmFtZSkge1xuICAgICAgY2FzZSAnc3VwcG9ydF9jb2xsYWJvcmF0aW9uJzogLy9DYXJkIG9uIENvbGxhYm9yYXRpb24gcGFnZVxuICAgICAgICBmbGFnQ2xhc3MgPSAnLmZsYWctc3VwcG9ydC1jb2xsYWJvcmF0aW9uLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnc3VwcG9ydCc7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdmb2xsb3dfY29sbGFib3JhdGlvbic6IC8vQ2FyZCBvbiBDb2xsYWJvcmF0aW9uIHBhZ2VcbiAgICAgICAgZmxhZ0NsYXNzID0gJy5mbGFnLWZvbGxvdy1jb2xsYWJvcmF0aW9uLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnZm9sbG93JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NoYWxsZW5nZV9mbGFnJzogLy9JbmRpdmlkdWFsIGNoYWxsZW5nZSBwYWdlXG4gICAgICAgIGZsYWdDbGFzcyA9ICcuZmxhZy1jaGFsbGVuZ2UtZmxhZy0nICsgZGF0YS5jb250ZW50SWQ7XG4gICAgICAgIGZsYWdUeXBlID0gJ2ZvbGxvdyc7XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3N1cHBvcnRfaWRlYSc6IC8vQ2FyZCBvbiBDb2xsYWJvcmF0aW9uIHBhZ2VcbiAgICAgICAgZmxhZ0NsYXNzID0gJy5mbGFnLXN1cHBvcnQtaWRlYS0nICsgZGF0YS5jb250ZW50SWQ7XG4gICAgICAgIGZsYWdUeXBlID0gJ3N1cHBvcnQnXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdmb2xsb3dpbmdfaWRlYSc6IC8vQ2FyZCBvbiBDb2xsYWJvcmF0aW9uIHBhZ2VcbiAgICAgICAgZmxhZ0NsYXNzID0gJy5mbGFnLWZvbGxvd2luZy1pZGVhLScgKyBkYXRhLmNvbnRlbnRJZDtcbiAgICAgICAgZmxhZ1R5cGUgPSAnZm9sbG93JztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy9HZXQgQ2FyZCBUeXBlXG4gICAgY2FyZFR5cGUgPSBnZXRDYXJkVHlwZShmbGFnQ2xhc3MpO1xuICAgIGljb25TdXBwb3J0QW5kRm9sbG93SW50ZXJhY3Rpb24oZmxhZ1R5cGUsIGZsYWdDbGFzcywgc3RhdHVzLCBjYXJkVHlwZSk7XG5cbiAgfSk7XG5cbn0pO1xuXG4vL0NoYW5nZXMgZmxhZyBpY29ucyBvbiBzdXBwb3J0L3Vuc3VwcG9ydCBhbmQgZm9sbG93L3VuZm9sbG93XG5mdW5jdGlvbiBpY29uU3VwcG9ydEFuZEZvbGxvd0ludGVyYWN0aW9uKGZsYWdUeXBlLCBmbGFnQ2xhc3MsIGZsYWdTdGF0dXMsIGNhcmRUeXBlKSB7XG4gIHZhciBjbGFzc1NpbXBsZSA9ICcnO1xuICB2YXIgY2xhc3NGdWxsID0gJyc7XG4gIHZhciB2YWx1ZUNsYXNzID0gJyc7XG4gIHZhciBjb3VudGVyID0gMDtcbiAgdmFyIGNsYXNzRmxhZyA9ICdmbGFnZ2VkJztcblxuICBpZiAoZmxhZ1R5cGUgPT09ICdmb2xsb3cnKSB7XG4gICAgY2xhc3NTaW1wbGUgPSAnaWNvbi1leWUnO1xuICAgIGNsYXNzRnVsbCA9ICdpY29uLWV5ZS1mdWxsIGZsYWdnZWQnO1xuXG4gIH0gZWxzZSBpZiAoIGZsYWdUeXBlID09PSAnc3VwcG9ydCcgICkge1xuICAgIGNsYXNzU2ltcGxlID0gJ2ljb24taGVhcnQnO1xuICAgIGNsYXNzRnVsbCA9ICdpY29uLWhlYXJ0LWZ1bGwgZmxhZ2dlZCc7XG4gIH1cblxuICBpZihjYXJkVHlwZSA9PSAnc2lkZWJhcicpIHtcbiAgICB2YWx1ZUNsYXNzID0gJChmbGFnQ2xhc3MpLnBhcmVudCgpLnNpYmxpbmdzKCcudmFsdWUnKTtcbiAgfSBlbHNlIHtcbiAgICB2YWx1ZUNsYXNzID0gJChmbGFnQ2xhc3MpLnNpYmxpbmdzKCcudmFsdWUnKTtcbiAgfVxuXG4gIHZhciBjb3VudGVyID0gIHBhcnNlSW50KCB2YWx1ZUNsYXNzLmZpcnN0KCkudGV4dCgpICk7XG5cbiAgaWYoIGZsYWdTdGF0dXMgPT0gJ2ZsYWdnZWQnICkge1xuICAgICQoZmxhZ0NsYXNzKS5zaWJsaW5ncygnW2NsYXNzXj1cImljb24tXCJdJykuYWRkQ2xhc3MoY2xhc3NGdWxsKTtcbiAgICB2YWx1ZUNsYXNzLmFkZENsYXNzKGNsYXNzRmxhZyk7XG4gICAgJChmbGFnQ2xhc3MpLnNpYmxpbmdzKCdbY2xhc3NePVwiaWNvbi1cIl0nKS5yZW1vdmVDbGFzcyhjbGFzc1NpbXBsZSk7XG4gICAgY291bnRlciA9ICBjb3VudGVyICsgMTtcbiAgfSBlbHNlIHtcbiAgICAkKGZsYWdDbGFzcykuc2libGluZ3MoJ1tjbGFzc149XCJpY29uLVwiXScpLmFkZENsYXNzKGNsYXNzU2ltcGxlKTtcbiAgICAkKGZsYWdDbGFzcykuc2libGluZ3MoJ1tjbGFzc149XCJpY29uLVwiXScpLnJlbW92ZUNsYXNzKGNsYXNzRnVsbCk7XG4gICAgdmFsdWVDbGFzcy5yZW1vdmVDbGFzcyhjbGFzc0ZsYWcpO1xuICAgIGNvdW50ZXIgPSAgY291bnRlciAtIDE7XG4gIH1cblxuICB2YWx1ZUNsYXNzLnRleHQoIGNvdW50ZXIgKTtcblxufVxuXG4vL0dldCB0aGUgY2FyZCB0eXBlIGJhc2VkIG9uIHRoZSBsaW5rIHR5cGVcbmZ1bmN0aW9uIGdldENhcmRUeXBlKGZsYWdDbGFzcyl7XG4gIHZhciBmbGFnUGFyZW50ID0gJChmbGFnQ2xhc3MpLnBhcmVudCgpO1xuXG4gIGlmKCBmbGFnUGFyZW50Lmhhc0NsYXNzKCdzaWRlYmFyLWxpbmsnKSApe1xuICAgIHJldHVybiAnc2lkZWJhcic7XG4gIH0gZWxzZSBpZiggZmxhZ1BhcmVudC5oYXNDbGFzcygnY2FyZC1mdWxsLWxpbmsnKSApe1xuICAgIHJldHVybiAnY2FyZC1mdWxsJztcbiAgfSBlbHNlIGlmICggZmxhZ1BhcmVudC5oYXNDbGFzcygnY2FyZC1sYXJnZS1saW5rJykgKSB7XG4gICAgcmV0dXJuICdjYXJkLWxhcmdlJztcbiAgfSBlbHNlIGlmICggZmxhZ1BhcmVudC5oYXNDbGFzcygnY2FyZC1zbWFsbC1saW5rJykgKSB7XG4gICAgcmV0dXJuICdjYXJkLXNtYWxsJ1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLy9DZW50ZXIgbGFyZ2UgY2FyZHNcbmZ1bmN0aW9uIGNlbnRlckxhcmdlQ2FyZHMoKSB7XG4gICQoJy52aWV3JykuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcbiAgICB2YXIgbGFyZ2VDYXJkID0gJy5jYXJkLmxhcmdlJztcbiAgICB2YXIgbkNhcmRzID0gJCh0aGlzKS5maW5kKGxhcmdlQ2FyZCkubGVuZ3RoO1xuXG4gICAgaWYoIG5DYXJkcyA9PSAxKSB7XG4gICAgICAkKGxhcmdlQ2FyZCkuY3NzKHtcbiAgICAgICAgJ21hcmdpbi1sZWZ0JzogJ2F1dG8nLFxuICAgICAgICAnbWFyZ2luLXJpZ2h0JzogJ2F1dG8nLFxuICAgICAgICAnZmxvYXQnOiAnbm9uZSdcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoIG5DYXJkcyA9PSAyICkge1xuICAgICAgJChsYXJnZUNhcmQpLmZpcnN0KCkuYWRkQ2xhc3MoJ2NvbC1zbS1vZmZzZXQtMicpO1xuICAgIH1cblxuICB9KTtcbn1cblxuLy9VcGRhdGUgYmFja2dvcnVuZCBoZWFkZXJzIG9uIGNoYWxsZW5nZS9jb2xsYWJvcmF0ZS9pZGVhc1xuJC5mbi51cGRhdGVCYWNrZ3JvdW5kSGVhZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gIHZhciBjb250YWluZXIgPSAkKHRoaXMpO1xuICB2YXIgZGF0YUJnID0gY29udGFpbmVyLmRhdGEoJ2JhY2tncm91bmQnKTtcblxuICBpZiggZGF0YUJnICl7XG4gICAgdmFyIGRhdGFUeXBlID0gY29udGFpbmVyLmRhdGEoJ3R5cGUnKTtcbiAgICB2YXIgY2xvc2VzdEZ1bGxXaWR0aFRvcCA9IGNvbnRhaW5lci5jbG9zZXN0KCcuZnVsbC13aWR0aC10b3AnKTtcbiAgICB2YXIgY29sb3JCYWNrZ3JvdW5kID0gIGNsb3Nlc3RGdWxsV2lkdGhUb3AuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJyk7XG5cbiAgICBjbG9zZXN0RnVsbFdpZHRoVG9wLlxuICAgIGNzcygnYmFja2dyb3VuZC1pbWFnZScsIGNvbG9yQmFja2dyb3VuZCArICcsIHVybChcIicgKyBkYXRhQmcgKyAnXCIpJyk7XG4gIH1cbn1cblxuLy9TdG9wIGJvZHkgc2Nyb2xsaW5nXG4kLmZuLnN0b3BCb2R5U2Nyb2xsID0gIGZ1bmN0aW9uKCkge1xuICAkKHRoaXMpLmNsb3Nlc3QoJ2JvZHknKS50b2dnbGVDbGFzcygnc3RvcC1zY3JvbGxpbmcnKTtcbn1cblxuLy9DYWxjdWxhdGUgYW5kIGFzc2lnbiB0aGUgc2FtZSBoZWlnaHQgdG8gdGhlIGNhcmQgYmFzZWQgb24gdGhlIGhpZ2hlc3QgY2FyZCBvbiB0aGUgcGFnZVxuJC5mbi5lcXVhbEhlaWdodHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHRhbGxlc3RIZWlnaHQgPSAwO1xuICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsKSB7XG4gICAgdmFyIGhlaWdodCA9ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgaWYoIGhlaWdodCA+IHRhbGxlc3RIZWlnaHQgKXtcbiAgICAgIHRhbGxlc3RIZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdGFsbGVzdEhlaWdodDtcbn07XG5cbn0pKGpRdWVyeSk7XG4iLCIvKiBNb2JpbGUgbWVudSBzbGlkZSAqL1xuXG4oZnVuY3Rpb24gKCQpIHtcdFxuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIHdpbiA9ICQod2luZG93KTtcbiAgdmFyIGRvYyA9ICQoZG9jdW1lbnQpO1xuXG4gIGRvYy5yZWFkeShmdW5jdGlvbigkKSB7XG4gIFx0dmFyIG5hdiA9ICQoXCJuYXYuc2xpZGVyLW1vYmlsZVwiKTtcbiAgXHR2YXIgb3ZlcmxheSA9ICQoJy5vdmVybGF5Jyk7XG4gIFx0dmFyIGxlZnROYXYgPSBuYXYuY3NzKCdsZWZ0Jyk7XG5cbiAgXHQkKCcjbmF2LWhhbWJ1cmdlcicpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgXHRcdGUucHJldmVudERlZmF1bHQoKTtcbiAgXHRcdG9wZW5OYXZBbmRPdmVybGF5KCk7XG4gIFx0fSk7XG5cbiAgXHQkKCcjbmF2LW1vYmlsZS1jbG9zZSwgLm92ZXJsYXknKS5jbGljayhmdW5jdGlvbihlKSB7XG4gIFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4gIFx0XHRjbG9zZU5hdkFuZE92ZXJsYXkoKTtcbiAgXHR9KTtcblxuICBcdC8vRGlzcGxheSBzaWRlTmF2IGFuZCAgb3ZlcmxheVxuICBcdGZ1bmN0aW9uIG9wZW5OYXZBbmRPdmVybGF5KCkge1xuICBcdCAgb3ZlcmxheS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgXHQgIG92ZXJsYXkuYW5pbWF0ZSh7XG4gIFx0ICBcdG9wYWNpdHk6ICcxJyBcbiAgXHQgIH0sIDEwMClcblxuICBcdCAgbmF2LmFuaW1hdGUoe1xuICBcdCAgICBsZWZ0OiAnMCdcbiAgXHQgIH0sIDE1MCk7IFxuXG4gICAgICAvL0Rpc2FibGUgc2Nyb2xsIGZvciBiYWNrZ3JvdW5kIHBhZ2VcbiAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnc3RvcC1zY3JvbGxpbmcnKTtcblx0ICB9XG5cdCBcbiAgXHQvL0hpZGUgc2lkZU5hdiBhbmQgb3ZlcmxheVxuICBcdGZ1bmN0aW9uIGNsb3NlTmF2QW5kT3ZlcmxheSgpe1xuICBcdCAgb3ZlcmxheS5jc3Moe1xuICBcdCAgXHRkaXNwbGF5OiAnbm9uZScsXG4gIFx0ICBcdG9wYWNpdHk6ICcwJ1xuICBcdCAgfSk7XG5cbiAgXHQgIG5hdi5hbmltYXRlKHtcbiAgXHQgICBsZWZ0OiBsZWZ0TmF2XG4gIFx0ICAgIH0sIDIwMCk7IFxuICAgICAgXG4gICAgICAgLy9FbmFibGUgc2Nyb2xsIGZvciBiYWNrZ3JvdW5kIHBhZ2VcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc3RvcC1zY3JvbGxpbmcnKTtcbiAgXHR9XG4gIFx0XG4gIH0pO1xuXG59KShqUXVlcnkpO1xuIl19
