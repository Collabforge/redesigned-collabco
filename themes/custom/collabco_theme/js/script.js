!function(a){"use strict";function e(e,t,n,i){var l="",o="",s="",r=0,c="flagged";"follow"===e?(l="icon-eye",o="icon-eye-full flagged"):"support"===e&&(l="icon-heart",o="icon-heart-full flagged"),s="sidebar"==i?a(t).parent().siblings(".value"):a(t).siblings(".value");var r=parseInt(s.first().text());"flagged"==n?(a(t).siblings('[class^="icon-"]').addClass(o),s.addClass(c),a(t).siblings('[class^="icon-"]').removeClass(l),r+=1):(a(t).siblings('[class^="icon-"]').addClass(l),a(t).siblings('[class^="icon-"]').removeClass(o),s.removeClass(c),r-=1),s.text(r)}function t(e){var t=a(e).parent();return t.hasClass("sidebar-link")?"sidebar":t.hasClass("card-full-link")?"card-full":t.hasClass("card-large-link")?"card-large":t.hasClass("card-small-link")?"card-small":null}function n(){var e=l.width();a(".card.large .content").outerHeight("auto"),e>768&&i()}function i(){a(".view").each(function(e,t){a(this).find(".card.large .content").outerHeight(a(this).find(".card.large .content").equalHeights())})}var l=a(window),o=a(document);o.ready(function(){n(),a("*").find(".node-type-conversation").length>0&&a(".ui-menu-collaboration-discussion").addClass("active"),a("*").find(".node-type-knowledge-object").length>0&&a(".ui-menu-collaboration-documents").addClass("active"),a(".cockade").hover(function(){a(this).next().stop().animate({"max-width":"100%",padding:"5px 6px 5px 40px"},"fast")},function(){a(this).next().stop().animate({"max-width":"0",padding:"5px 0"},"fast")}),a(".card .feat-img img, .full-width-card .feat-img img").each(function(e,t){var n=a(this).attr("src"),i=a(this).closest(".feat-img").css("height");a(this).parent("a").css({"background-image":'url("'+n+'")',"background-size":"cover","background-repeat":"no-repeat","background-position":"center center",height:i,width:"100%",display:"inline-block"}),a(this).remove()}),a(".card-large-link, .card-full-link, .small-card-link, .sidebar-2 .stat-label, .sidebar-2 .nav li ").hover(function(){a(this).find("a , .value").css("color","#00746A")},function(){a(this).find("a , .value").css("color","inherit")}),a('[data-toggle="popover"]').popover(),a(".page-search .nav-tabs").insertAfter("#search-form"),a('.page-node-edit.node-type-hub .nav a[href="#edit-options"]').tooltip({placement:"right",title:"Please review the publishing options before finalising the promotion of this idea. By default, it will be unpublished and thus not visible on the website."}),a('.event a[class^="icon-"], .event a[class*=" icon-"]').click(function(e){e.preventDefault(),a(this).parent().find(".flag-wrapper a").trigger("click"),e.stopPropagation()});var i=".follow.event, .follow.event .flag-wrapper, .support.event, .support.event .flag-wrapper ";o.on("click",i,function(e){e.target==this&&(e.preventDefault(),a(this).find("a").trigger("click"))}),a(".follow.event, .support.event").on("click",".flag-wrapper a",function(a){a.stopPropagation()}),a(".comment").filter(".small-card-link,.card-large-link,.card-full-link").click(function(){event.preventDefault();var e=a(this).find(".icon-dialogue").attr("href");window.location.href=e}),a(".ideas.card-large-link, .share .stat-label, .mail .stat-label, .sidebar-2 ul li").click(function(){event.preventDefault();var e=a(this).find("a").attr("href");window.location.href=e}),o.bind("flagGlobalAfterLinkUpdate",function(a,n){var i=n.flagStatus,l="",o="",s="";switch(n.flagName){case"support_collaboration":l=".flag-support-collaboration-"+n.contentId,o="support";break;case"follow_collaboration":l=".flag-follow-collaboration-"+n.contentId,o="follow";break;case"challenge_flag":l=".flag-challenge-flag-"+n.contentId,o="follow";break;case"support_idea":l=".flag-support-idea-"+n.contentId,o="support";break;case"following_idea":l=".flag-following-idea-"+n.contentId,o="follow"}s=t(l),e(o,l,i,s)}),l.on("resize",n)}),a.fn.updateBackgroundHeader=function(){var e=a(this),t=e.data("background");if(t){var n=(e.data("type"),e.closest(".full-width-top")),i=n.css("background-image");n.css("background-image",i+', url("'+t+'")')}},a.fn.stopBodyScroll=function(){a(this).closest("body").toggleClass("stop-scrolling")},a.fn.equalHeights=function(){var e=0;return a(this).each(function(t,n){var i=a(this).outerHeight(!0);i>e&&(e=i)}),e}}(jQuery),function(a){"use strict";var e=(a(window),a(document));e.ready(function(a){function e(){i.css("display","block"),i.animate({opacity:"1"},100),n.animate({left:"0"},150),a("body").addClass("stop-scrolling")}function t(){i.css({display:"none",opacity:"0"}),n.animate({left:l},200),a("body").removeClass("stop-scrolling")}var n=a("nav.slider-mobile"),i=a(".overlay"),l=n.css("left");a("#nav-hamburger").click(function(a){a.preventDefault(),e()}),a("#nav-mobile-close, .overlay").click(function(a){a.preventDefault(),t()})})}(jQuery);